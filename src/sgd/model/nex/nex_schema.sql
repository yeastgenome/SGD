/* Sequences */

DROP SEQUENCE ALIAS_SEQ;
CREATE SEQUENCE ALIAS_SEQ NOCACHE;

DROP SEQUENCE ARCHIVE_SEQ;
CREATE SEQUENCE ARCHIVE_SEQ NOCACHE;

DROP SEQUENCE ANNOTATION_SEQ;
CREATE SEQUENCE ANNOTATION_SEQ NOCACHE;

DROP SEQUENCE COLLEAGUE_ASSOCIATION_SEQ;
CREATE SEQUENCE COLLEAGUE_ASSOCIATION_SEQ NOCACHE;

DROP SEQUENCE COLLEAGUE_LOCUS_SEQ;
CREATE SEQUENCE COLLEAGUE_LOCUS_SEQ NOCACHE;

DROP SEQUENCE COLLEAGUE_KEYWORD_SEQ;
CREATE SEQUENCE COLLEAGUE_KEYWORD_SEQ NOCACHE;

DROP SEQUENCE COLLEAGUE_REFERENCE_SEQ;
CREATE SEQUENCE COLLEAGUE_REFERENCE_SEQ NOCACHE;

DROP SEQUENCE CONDITION_SEQ;
CREATE SEQUENCE CONDITION_SEQ NOCACHE;

DROP SEQUENCE CURATION_SEQ;
CREATE SEQUENCE CURATION_SEQ NOCACHE;

DROP SEQUENCE DELETE_LOG_SEQ;
CREATE SEQUENCE DELETE_LOG_SEQ NOCACHE;

DROP SEQUENCE DETAIL_SEQ;
CREATE SEQUENCE DETAIL_SEQ NOCACHE;

DROP SEQUENCE DNASUBSEQUENCE_SEQ;
CREATE SEQUENCE DNASUBSEQUENCE_SEQ NOCACHE;

DROP SEQUENCE GOEXTENSION_SEQ;
CREATE SEQUENCE GOEXTENSION_SEQ NOCACHE;

DROP SEQUENCE GOSUPPORTINGEVIDENCE_SEQ;
CREATE SEQUENCE GOSUPPORTINGEVIDENCE_SEQ NOCACHE;

DROP SEQUENCE LINK_SEQ;
CREATE SEQUENCE LINK_SEQ NOCACHE;

DROP SEQUENCE NTR_SEQ;
CREATE SEQUENCE NTR_SEQ NOCACHE;

DROP SEQUENCE OBJECT_SEQ;
CREATE SEQUENCE OBJECT_SEQ NOCACHE;

DROP SEQUENCE REFERENCE_AUTHOR_SEQ;
CREATE SEQUENCE REFERENCE_AUTHOR_SEQ NOCACHE;

DROP SEQUENCE REFERENCE_CORRECTION_SEQ;
CREATE SEQUENCE REFERENCE_CORRECTION_SEQ NOCACHE;

DROP SEQUENCE REFERENCE_DELETED_SEQ;
CREATE SEQUENCE REFERENCE_DELETED_SEQ NOCACHE;

DROP SEQUENCE REFERENCE_DOCUMENT_SEQ;
CREATE SEQUENCE REFERENCE_DOCUMENT_SEQ NOCACHE;

DROP SEQUENCE REFERENCE_REFTYPE_SEQ;
CREATE SEQUENCE REFERENCE_REFTYPE_SEQ NOCACHE;

DROP SEQUENCE REFERENCE_UNLINK_SEQ;
CREATE SEQUENCE REFERENCE_UNLINK_SEQ NOCACHE;

DROP SEQUENCE RELATION_SEQ;
CREATE SEQUENCE RELATION_SEQ NOCACHE;

DROP SEQUENCE SGDID_SEQ;
CREATE SEQUENCE SGDID_SEQ NOCACHE START WITH 200000 INCREMENT BY 1;

DROP SEQUENCE SUMMARY_SEQ;
CREATE SEQUENCE SUMMARY_SEQ NOCACHE;

DROP SEQUENCE SUMMARY_REFERENCE_SEQ;
CREATE SEQUENCE SUMMARY_REFERENCE_SEQ NOCACHE;

DROP SEQUENCE UPDATE_LOG_SEQ;
CREATE SEQUENCE UPDATE_LOG_SEQ NOCACHE;

DROP SEQUENCE URL_SEQ;
CREATE SEQUENCE URL_SEQ NOCACHE;

/* Audit */

DROP TABLE DELETE_LOG CASCADE CONSTRAINTS;
CREATE TABLE DELETE_LOG (
DELETE_LOG_ID INTEGER NOT NULL,
BUD_ID INTEGER,
TAB_NAME VARCHAR2(30) NOT NULL,
PRIMARY_KEY INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
DELETED_ROW CLOB NOT NULL,
CONSTRAINT DELETE_LOG_PK PRIMARY KEY (DELETE_LOG_ID)) TABLESPACE DATA04
LOB (DELETED_ROW) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
GRANT SELECT ON DELETE_LOG TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON DELETE_LOG TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DELETE_LOG TO AUXILIARY;

DROP TABLE UPDATE_LOG CASCADE CONSTRAINTS;
CREATE TABLE UPDATE_LOG (
UPDATE_LOG_ID INTEGER NOT NULL,
BUD_ID INTEGER,
TAB_NAME VARCHAR2(30) NOT NULL,
COL_NAME VARCHAR2(30) NOT NULL,
PRIMARY_KEY INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
OLD_VALUE CLOB,
NEW_VALUE CLOB,
CONSTRAINT UPDATE_LOG_PK PRIMARY KEY (UPDATE_LOG_ID)) TABLESPACE DATA04
LOB (OLD_VALUE) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none),
LOB (NEW_VALUE) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
GRANT SELECT ON UPDATE_LOG TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON UPDATE_LOG TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON UPDATE_LOG TO AUXILIARY;

/* Basic */

DROP TABLE DBUSER CASCADE CONSTRAINTS;
CREATE TABLE DBUSER (
DBUSER_ID INTEGER NOT NULL,
USERNAME VARCHAR2(12) NOT NULL,
BUD_ID INTEGER,
FIRST_NAME VARCHAR2(40) NOT NULL,
LAST_NAME VARCHAR2(40) NOT NULL,
STATUS VARCHAR2(40) NOT NULL CHECK (STATUS IN ('Current','Former')),
IS_CURATOR NUMBER(1) NOT NULL,
EMAIL VARCHAR2(100) NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CONSTRAINT DBUSER_PK PRIMARY KEY (DBUSER_ID),
CONSTRAINT DBUSER_UK UNIQUE (USERNAME) ) TABLESPACE DATA01;
GRANT SELECT ON DBUSER TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON DBUSER TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DBUSER TO AUXILIARY;

DROP TABLE SOURCE CASCADE CONSTRAINTS;
CREATE TABLE SOURCE ( 
SOURCE_ID INTEGER NOT NULL, 
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
BUD_ID INTEGER,
DESCRIPTION VARCHAR2(1000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL, 
CONSTRAINT SOURCE_PK PRIMARY KEY (SOURCE_ID), 
CONSTRAINT SOURCE_UK UNIQUE (FORMAT_NAME) ) TABLESPACE DATA01;
GRANT SELECT ON SOURCE TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON SOURCE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON SOURCE TO AUXILIARY;

DROP TABLE SGDID CASCADE CONSTRAINTS;
CREATE TABLE SGDID (
SGDID_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
SUBCLASS VARCHAR2(40) NOT NULL CHECK (SUBCLASS IN ('LOCUS','FILE','REFERENCE','STRAIN', 'PATHWAY')),
SGDID_STATUS VARCHAR2(40) NOT NULL CHECK (SGDID_STATUS IN ('Primary','Secondary','Deleted','Unassigned')),
DESCRIPTION VARCHAR2(1000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT SGDID_PK PRIMARY KEY (SGDID_ID),
CONSTRAINT SGDID_UK UNIQUE (FORMAT_NAME) ) TABLESPACE DATA01;
CREATE INDEX SGDID_SOURCE_FK_INDEX ON SGDID (SOURCE_ID) TABLESPACE DATA01;
ALTER TABLE SGDID
ADD CONSTRAINT SGDID_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON SGDID TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON SGDID TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON SGDID TO AUXILIARY;

/* Ontologies and CVs */

DROP TABLE RO CASCADE CONSTRAINTS;
CREATE TABLE RO (
RO_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
ROID VARCHAR2(20) NOT NULL,
DESCRIPTION VARCHAR2(1000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT RO_PK PRIMARY KEY (RO_ID),
CONSTRAINT RO_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE UNIQUE INDEX ROID_UK_INDEX on RO (ROID) TABLESPACE DATA02;
CREATE INDEX RO_SOURCE_FK_INDEX ON RO (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE RO
ADD CONSTRAINT RO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON RO TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON RO TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON RO TO AUXILIARY;

DROP TABLE RO_URL CASCADE CONSTRAINTS;
CREATE TABLE RO_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL CHECK (DISPLAY_NAME IN ('Ontobee')),
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
RO_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('Ontobee')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT RO_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT RO_URL_UK UNIQUE (RO_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX RO_URL_SOURCE_FK_INDEX ON RO_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE RO_URL
ADD CONSTRAINT RO_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE RO_URL
ADD CONSTRAINT RO_URL_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON RO_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON RO_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON RO_URL TO AUXILIARY;

DROP TABLE RO_RELATION CASCADE CONSTRAINTS;
CREATE TABLE RO_RELATION (
RELATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
RELATION_TYPE VARCHAR2(40) NOT NULL CHECK (RELATION_TYPE IN ('is a')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT RO_RELATION_PK PRIMARY KEY (RELATION_ID),
CONSTRAINT RO_RELATION_UK UNIQUE(PARENT_ID, CHILD_ID, RELATION_TYPE)) TABLESPACE DATA02;
CREATE INDEX RO_REL_CHILD_FK_INDEX ON RO_RELATION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX RO_REL_SOURCE_FK_INDEX ON RO_RELATION (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE RO_RELATION
ADD CONSTRAINT RO_REL_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE RO_RELATION
ADD CONSTRAINT RO_REL_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE RO_RELATION
ADD CONSTRAINT RO_REL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON RO_RELATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON RO_RELATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON RO_RELATION TO AUXILIARY;

DROP TABLE APO CASCADE CONSTRAINTS;
CREATE TABLE APO (
APO_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
APOID VARCHAR2(20) NOT NULL,
APO_NAMESPACE VARCHAR2(20) NOT NULL CHECK (APO_NAMESPACE IN ('observable','qualifier','experiment_type','mutant_type')),
DESCRIPTION VARCHAR2(1000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT APO_PK PRIMARY KEY (APO_ID),
CONSTRAINT APO_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE UNIQUE INDEX APOID_UK_INDEX on APO (APOID) TABLESPACE DATA02;
CREATE INDEX APO_SOURCE_FK_INDEX ON APO (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE APO
ADD CONSTRAINT APO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON APO TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON APO TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON APO TO AUXILIARY;

DROP TABLE APO_ALIAS CASCADE CONSTRAINTS;
CREATE TABLE APO_ALIAS (
ALIAS_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
APO_ID INTEGER NOT NULL,
ALIAS_TYPE VARCHAR2(40) NOT NULL CHECK (ALIAS_TYPE IN ('EXACT','RELATED')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT APO_ALIAS_PK PRIMARY KEY (ALIAS_ID),
CONSTRAINT APO_ALIAS_UK UNIQUE (APO_ID, DISPLAY_NAME, ALIAS_TYPE) ) TABLESPACE DATA02;
CREATE INDEX APO_ALIAS_SOURCE_FK_INDEX ON APO_ALIAS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE APO_ALIAS
ADD CONSTRAINT APO_ALIAS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE APO_ALIAS
ADD CONSTRAINT APO_ALIAS_APO_FK FOREIGN KEY (APO_ID) REFERENCES APO (APO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON APO_ALIAS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON APO_ALIAS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON APO_ALIAS TO AUXILIARY;

DROP TABLE APO_URL CASCADE CONSTRAINTS;
CREATE TABLE APO_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL CHECK (DISPLAY_NAME IN ('BioPortal')),
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
APO_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('BioPortal')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT APO_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT APO_URL_UK UNIQUE (APO_ID, DISPLAY_NAME, OBJ_URL)) TABLESPACE DATA02;
CREATE INDEX APO_URL_SOURCE_FK_INDEX ON APO_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE APO_URL
ADD CONSTRAINT APO_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE APO_URL
ADD CONSTRAINT APO_URL_APO_FK FOREIGN KEY (APO_ID) REFERENCES APO (APO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON APO_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON APO_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON APO_URL TO AUXILIARY;

DROP TABLE APO_RELATION CASCADE CONSTRAINTS;
CREATE TABLE APO_RELATION (
RELATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
RO_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT APO_RELATION_PK PRIMARY KEY (RELATION_ID),
CONSTRAINT APO_RELATION_UK UNIQUE(PARENT_ID, CHILD_ID, RO_ID)) TABLESPACE DATA02;
CREATE INDEX APO_REL_CHILD_FK_INDEX ON APO_RELATION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX APO_REL_SOURCE_FK_INDEX ON APO_RELATION (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX APO_REL_RO_FK_INDEX ON APO_RELATION (RO_ID) TABLESPACE DATA02;
ALTER TABLE APO_RELATION
ADD CONSTRAINT APO_REL_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES APO (APO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE APO_RELATION
ADD CONSTRAINT APO_REL_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES APO (APO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE APO_RELATION
ADD CONSTRAINT APO_REL_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE APO_RELATION
ADD CONSTRAINT APO_REL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON APO_RELATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON APO_RELATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON APO_RELATION TO AUXILIARY;

DROP TABLE CHEBI CASCADE CONSTRAINTS;
CREATE TABLE CHEBI (
CHEBI_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
CHEBIID VARCHAR2(20) NOT NULL,
DESCRIPTION VARCHAR2(2000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT CHEBI_PK PRIMARY KEY (CHEBI_ID),
CONSTRAINT CHEBI_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE UNIQUE INDEX CHEBIID_UK_INDEX on CHEBI (CHEBIID) TABLESPACE DATA02;
CREATE INDEX CHEBI_SOURCE_FK_INDEX ON CHEBI (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE CHEBI
ADD CONSTRAINT CHEBI_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON CHEBI TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON CHEBI TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON CHEBI TO AUXILIARY;

DROP TABLE CHEBI_ALIAS CASCADE CONSTRAINTS;
CREATE TABLE CHEBI_ALIAS (
ALIAS_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
CHEBI_ID INTEGER NOT NULL,
ALIAS_TYPE VARCHAR2(40) NOT NULL CHECK (ALIAS_TYPE IN ('EXACT','RELATED','Secondary ChEBI ID','IUPAC name')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT CHEBI_ALIAS_PK PRIMARY KEY (ALIAS_ID),
CONSTRAINT CHEBI_ALIAS_UK UNIQUE (CHEBI_ID, DISPLAY_NAME, ALIAS_TYPE) ) TABLESPACE DATA02;
CREATE INDEX CHEBI_ALIAS_SOURCE_FK_INDEX ON CHEBI_ALIAS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE CHEBI_ALIAS
ADD CONSTRAINT CHEBI_ALIAS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CHEBI_ALIAS
ADD CONSTRAINT CHEBI_ALIAS_CHEBI_FK FOREIGN KEY (CHEBI_ID) REFERENCES CHEBI (CHEBI_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON CHEBI_ALIAS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON CHEBI_ALIAS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON CHEBI_ALIAS TO AUXILIARY;

DROP TABLE CHEBI_URL CASCADE CONSTRAINTS;
CREATE TABLE CHEBI_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL CHECK (DISPLAY_NAME IN ('ChEBI')),
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
CHEBI_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('ChEBI')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT CHEBI_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT CHEBI_URL_UK UNIQUE (CHEBI_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX CHEBI_URL_SOURCE_FK_INDEX ON CHEBI_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE CHEBI_URL
ADD CONSTRAINT CHEBI_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CHEBI_URL
ADD CONSTRAINT CHEBI_URL_CHEBI_FK FOREIGN KEY (CHEBI_ID) REFERENCES CHEBI (CHEBI_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON CHEBI_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON CHEBI_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON CHEBI_URL TO AUXILIARY;

DROP TABLE CHEBI_RELATION CASCADE CONSTRAINTS;
CREATE TABLE CHEBI_RELATION (
RELATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
RO_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT CHEBI_RELATION_PK PRIMARY KEY (RELATION_ID),
CONSTRAINT CHEBI_RELATION_UK UNIQUE(PARENT_ID, CHILD_ID, RO_ID)) TABLESPACE DATA02;
CREATE INDEX CHEBI_REL_CHILD_FK_INDEX ON CHEBI_RELATION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX CHEBI_REL_SOURCE_FK_INDEX ON CHEBI_RELATION (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX CHEBI_REL_RO_FK_INDEX ON CHEBI_RELATION (RO_ID) TABLESPACE DATA02;
ALTER TABLE CHEBI_RELATION
ADD CONSTRAINT CHEBI_REL_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES CHEBI (CHEBI_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CHEBI_RELATION
ADD CONSTRAINT CHEBI_REL_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES CHEBI (CHEBI_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CHEBI_RELATION
ADD CONSTRAINT CHEBI_REL_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CHEBI_RELATION
ADD CONSTRAINT CHEBI_REL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON CHEBI_RELATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON CHEBI_RELATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON CHEBI_RELATION TO AUXILIARY;

DROP TABLE EC CASCADE CONSTRAINTS;
CREATE TABLE EC (
EC_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
ECID VARCHAR2(20) NOT NULL,
DESCRIPTION VARCHAR2(1000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT EC_PK PRIMARY KEY (EC_ID),
CONSTRAINT EC_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE UNIQUE INDEX ECID_UK_INDEX on EC (ECID) TABLESPACE DATA02;
CREATE INDEX EC_SOURCE_FK_INDEX ON EC (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE EC
ADD CONSTRAINT EC_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON EC TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON EC TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON EC TO AUXILIARY;

DROP TABLE EC_ALIAS CASCADE CONSTRAINTS;
CREATE TABLE EC_ALIAS (
ALIAS_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
EC_ID INTEGER NOT NULL,
ALIAS_TYPE VARCHAR2(40) NOT NULL CHECK (ALIAS_TYPE IN ('Synonym')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT EC_ALIAS_PK PRIMARY KEY (ALIAS_ID),
CONSTRAINT EC_ALIAS_UK UNIQUE (EC_ID, DISPLAY_NAME, ALIAS_TYPE) ) TABLESPACE DATA02;
CREATE INDEX EC_ALIAS_SOURCE_FK_INDEX ON EC_ALIAS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE EC_ALIAS
ADD CONSTRAINT EC_ALIAS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE EC_ALIAS
ADD CONSTRAINT EC_ALIAS_EC_FK FOREIGN KEY (EC_ID) REFERENCES EC (EC_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON EC_ALIAS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON EC_ALIAS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON EC_ALIAS TO AUXILIARY;

DROP TABLE EC_URL CASCADE CONSTRAINTS;
CREATE TABLE EC_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL CHECK (DISPLAY_NAME IN ('ExPASy','BRENDA')),
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
EC_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('ExPASy','BRENDA')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT EC_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT EC_URL_UK UNIQUE (EC_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX EC_URL_SOURCE_FK_INDEX ON EC_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE EC_URL
ADD CONSTRAINT EC_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE EC_URL
ADD CONSTRAINT EC_URL_EC_FK FOREIGN KEY (EC_ID) REFERENCES EC (EC_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON EC_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON EC_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON EC_URL TO AUXILIARY;

DROP TABLE ECO CASCADE CONSTRAINTS;
CREATE TABLE ECO (
ECO_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
ECOID VARCHAR2(20) NOT NULL,
DESCRIPTION VARCHAR2(1000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT ECO_PK PRIMARY KEY (ECO_ID),
CONSTRAINT ECO_UK UNIQUE (FORMAT_NAME) ) TABLESPACE DATA02;
CREATE UNIQUE INDEX ECOID_UK_INDEX on ECO (ECOID) TABLESPACE DATA02;
CREATE INDEX ECO_SOURCE_FK_INDEX ON ECO (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE ECO
ADD CONSTRAINT ECO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON ECO TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON ECO TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ECO TO AUXILIARY;

DROP TABLE ECO_ALIAS CASCADE CONSTRAINTS;
CREATE TABLE ECO_ALIAS (
ALIAS_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
ECO_ID INTEGER NOT NULL,
ALIAS_TYPE VARCHAR2(40) NOT NULL CHECK (ALIAS_TYPE IN ('BROAD','EXACT','RELATED','NARROW')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT ECO_ALIAS_PK PRIMARY KEY (ALIAS_ID),
CONSTRAINT ECO_ALIAS_UK UNIQUE (ECO_ID, DISPLAY_NAME, ALIAS_TYPE) ) TABLESPACE DATA02;
CREATE INDEX ECO_ALIAS_SOURCE_FK_INDEX ON ECO_ALIAS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE ECO_ALIAS
ADD CONSTRAINT ECO_ALIAS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE ECO_ALIAS
ADD CONSTRAINT ECO_ALIAS_ECO_FK FOREIGN KEY (ECO_ID) REFERENCES ECO (ECO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON ECO_ALIAS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ECO_ALIAS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ECO_ALIAS TO AUXILIARY;

DROP TABLE ECO_URL CASCADE CONSTRAINTS;
CREATE TABLE ECO_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL CHECK (DISPLAY_NAME IN ('BioPortal','OLS')),
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
ECO_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('BioPortal','OLS')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT ECO_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT ECO_URL_UK UNIQUE (ECO_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX ECO_URL_SOURCE_FK_INDEX ON ECO_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE ECO_URL
ADD CONSTRAINT ECO_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE ECO_URL
ADD CONSTRAINT ECO_URL_ECO_FK FOREIGN KEY (ECO_ID) REFERENCES ECO (ECO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON ECO_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ECO_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ECO_URL TO AUXILIARY;

DROP TABLE ECO_RELATION CASCADE CONSTRAINTS;
CREATE TABLE ECO_RELATION (
RELATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
RO_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT ECO_RELATION_PK PRIMARY KEY (RELATION_ID),
CONSTRAINT ECO_RELATION_UK UNIQUE(PARENT_ID, CHILD_ID, RO_ID)) TABLESPACE DATA02;
CREATE INDEX ECO_REL_CHILD_FK_INDEX ON ECO_RELATION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX ECO_REL_RO_FK_INDEX ON ECO_RELATION (RO_ID) TABLESPACE DATA02;
CREATE INDEX ECO_REL_SOURCE_FK_INDEX ON ECO_RELATION (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE ECO_RELATION
ADD CONSTRAINT ECO_REL_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES ECO (ECO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE ECO_RELATION
ADD CONSTRAINT ECO_REL_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES ECO (ECO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE ECO_RELATION
ADD CONSTRAINT ECO_REL_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE ECO_RELATION
ADD CONSTRAINT ECO_REL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON ECO_RELATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ECO_RELATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ECO_RELATION TO AUXILIARY;

DROP TABLE EDAM CASCADE CONSTRAINTS;
CREATE TABLE EDAM (
EDAM_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
EDAMID VARCHAR2(20) NOT NULL,
EDAM_NAMESPACE VARCHAR2(20) NOT NULL CHECK (EDAM_NAMESPACE IN ('data','format','operation','topic')),
DESCRIPTION VARCHAR2(2000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT EDAM_PK PRIMARY KEY (EDAM_ID),
CONSTRAINT EDAM_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE UNIQUE INDEX EDAMID_UK_INDEX on EDAM (EDAMID) TABLESPACE DATA02;
CREATE INDEX EDAM_SOURCE_INDEX ON EDAM (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE EDAM
ADD CONSTRAINT EDAM_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON EDAM TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON EDAM TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON EDAM TO AUXILIARY;

DROP TABLE EDAM_ALIAS CASCADE CONSTRAINTS;
CREATE TABLE EDAM_ALIAS (
ALIAS_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
EDAM_ID INTEGER NOT NULL,
ALIAS_TYPE VARCHAR2(40) NOT NULL CHECK (ALIAS_TYPE IN ('BROAD','EXACT','RELATED','NARROW')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT EDAM_ALIAS_PK PRIMARY KEY (ALIAS_ID),
CONSTRAINT EDAM_ALIAS_UK UNIQUE (EDAM_ID, DISPLAY_NAME, ALIAS_TYPE)) TABLESPACE DATA02;
CREATE INDEX EDAM_ALIAS_SOURCE_FK_INDEX ON EDAM_ALIAS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE EDAM_ALIAS
ADD CONSTRAINT EDAM_ALIAS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE EDAM_ALIAS
ADD CONSTRAINT EDAM_ALIAS_EDAM_FK FOREIGN KEY (EDAM_ID) REFERENCES EDAM (EDAM_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON EDAM_ALIAS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON EDAM_ALIAS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON EDAM_ALIAS TO AUXILIARY;

DROP TABLE EDAM_URL CASCADE CONSTRAINTS;
CREATE TABLE EDAM_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
EDAM_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('BioPortal','Ontobee')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT EDAM_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT EDAM_URL_UK UNIQUE (EDAM_ID, DISPLAY_NAME, OBJ_URL)) TABLESPACE DATA02;
CREATE INDEX EDAM_URL_SOURCE_FK_INDEX ON EDAM_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE EDAM_URL
ADD CONSTRAINT EDAM_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE EDAM_URL
ADD CONSTRAINT EDAM_URL_EDAM_FK FOREIGN KEY (EDAM_ID) REFERENCES EDAM (EDAM_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON EDAM_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON EDAM_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON EDAM_URL TO AUXILIARY;

DROP TABLE EDAM_RELATION CASCADE CONSTRAINTS;
CREATE TABLE EDAM_RELATION (
RELATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
RO_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT EDAM_RELATION_PK PRIMARY KEY (RELATION_ID),
CONSTRAINT EDAM_RELATION_UK UNIQUE(PARENT_ID, CHILD_ID, RO_ID)) TABLESPACE DATA02;
CREATE INDEX EDAM_REL_CHILD_FK_INDEX ON EDAM_RELATION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX EDAM_REL_SOURCE_FK_INDEX ON EDAM_RELATION (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX EDAM_REL_RO_FK_INDEX ON EDAM_RELATION (RO_ID) TABLESPACE DATA02;
ALTER TABLE EDAM_RELATION
ADD CONSTRAINT EDAM_REL_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES EDAM (EDAM_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE EDAM_RELATION
ADD CONSTRAINT EDAM_REL_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES EDAM (EDAM_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE EDAM_RELATION
ADD CONSTRAINT EDAM_REL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE EDAM_RELATION
ADD CONSTRAINT EDAM_REL_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON EDAM_RELATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON EDAM_RELATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON EDAM_RELATION TO AUXILIARY;

DROP TABLE GO CASCADE CONSTRAINTS;
CREATE TABLE GO (
GO_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,><
GOID VARCHAR2(20) NOT NULL,
GO_NAMESPACE VARCHAR2(20) NOT NULL CHECK (GO_NAMESPACE IN ('cellular component','biological process','molecular function')),
DESCRIPTION VARCHAR2(2000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT GO_PK PRIMARY KEY (GO_ID),
CONSTRAINT GO_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE UNIQUE INDEX GOID_UK_INDEX on GO (GOID) TABLESPACE DATA02;
CREATE INDEX GO_SOURCE_INDEX ON GO (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE GO
ADD CONSTRAINT GO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON GO TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON GO TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON GO TO AUXILIARY;

DROP TABLE GO_ALIAS CASCADE CONSTRAINTS;
CREATE TABLE GO_ALIAS (
ALIAS_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
GO_ID INTEGER NOT NULL,
ALIAS_TYPE VARCHAR2(40) NOT NULL CHECK (ALIAS_TYPE IN ('BROAD','EXACT','RELATED','NARROW')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT GO_ALIAS_PK PRIMARY KEY (ALIAS_ID),
CONSTRAINT GO_ALIAS_UK UNIQUE (GO_ID, DISPLAY_NAME, ALIAS_TYPE)) TABLESPACE DATA02;
CREATE INDEX GO_ALIAS_SOURCE_FK_INDEX ON GO_ALIAS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE GO_ALIAS
ADD CONSTRAINT GO_ALIAS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GO_ALIAS
ADD CONSTRAINT GO_ALIAS_GO_FK FOREIGN KEY (GO_ID) REFERENCES GO (GO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON GO_ALIAS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON GO_ALIAS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON GO_ALIAS TO AUXILIARY;

DROP TABLE GO_URL CASCADE CONSTRAINTS;
CREATE TABLE GO_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
GO_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('Amigo','GO')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT GO_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT GO_URL_UK UNIQUE (GO_ID, DISPLAY_NAME, OBJ_URL)) TABLESPACE DATA02;
CREATE INDEX GO_URL_SOURCE_FK_INDEX ON GO_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE GO_URL
ADD CONSTRAINT GO_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GO_URL
ADD CONSTRAINT GO_URL_GO_FK FOREIGN KEY (GO_ID) REFERENCES GO (GO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON GO_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON GO_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON GO_URL TO AUXILIARY;

DROP TABLE GO_RELATION CASCADE CONSTRAINTS;
CREATE TABLE GO_RELATION (
RELATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
RO_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT GO_RELATION_PK PRIMARY KEY (RELATION_ID),
CONSTRAINT GO_RELATION_UK UNIQUE(PARENT_ID, CHILD_ID, RO_ID)) TABLESPACE DATA02;
CREATE INDEX GO_REL_CHILD_FK_INDEX ON GO_RELATION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX GO_REL_SOURCE_FK_INDEX ON GO_RELATION (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX GO_REL_RO_FK_INDEX ON GO_RELATION (RO_ID) TABLESPACE DATA02;
ALTER TABLE GO_RELATION
ADD CONSTRAINT GO_REL_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES GO (GO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GO_RELATION
ADD CONSTRAINT GO_REL_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES GO (GO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GO_RELATION
ADD CONSTRAINT GO_REL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GO_RELATION
ADD CONSTRAINT GO_REL_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON GO_RELATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON GO_RELATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON GO_RELATION TO AUXILIARY;

DROP TABLE KEYWORD CASCADE CONSTRAINTS;
CREATE TABLE KEYWORD (
KEYWORD_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
DESCRIPTION VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT KEYWORD_PK PRIMARY KEY (KEYWORD_ID) ,
CONSTRAINT KEYWORD_UK UNIQUE (FORMAT_NAME) ) TABLESPACE DATA02;
CREATE INDEX KEYWORD_SOURCE_FK ON KEYWORD (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX KEYWORD_DISPLAY_NAME ON KEYWORD (DISPLAY_NAME) TABLESPACE DATA02;
ALTER TABLE KEYWORD
ADD CONSTRAINT KEYWORD_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON KEYWORD TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON KEYWORD TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON KEYWORD TO AUXILIARY;

DROP TABLE OBI CASCADE CONSTRAINTS;
CREATE TABLE OBI (
OBI_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
OBIID VARCHAR2(20) NOT NULL,
DESCRIPTION VARCHAR2(2000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT OBI_PK PRIMARY KEY (OBI_ID),
CONSTRAINT OBI_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE UNIQUE INDEX OBIID_UK_INDEX on OBI (OBIID) TABLESPACE DATA02;
CREATE INDEX OBI_SOURCE_FK_INDEX ON OBI (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE OBI
ADD CONSTRAINT OBI_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON OBI TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON OBI TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON OBI TO AUXILIARY;

DROP TABLE OBI_URL CASCADE CONSTRAINTS;
CREATE TABLE OBI_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL CHECK (DISPLAY_NAME IN ('Ontobee')),
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
OBI_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('Ontobee')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT OBI_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT OBI_URL_UK UNIQUE (OBI_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX OBI_URL_SOURCE_FK_INDEX ON OBI_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE OBI_URL
ADD CONSTRAINT OBI_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE OBI_URL
ADD CONSTRAINT OBI_URL_OBI_FK FOREIGN KEY (OBI_ID) REFERENCES OBI (OBI_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON OBI_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON OBI_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON OBI_URL TO AUXILIARY;

DROP TABLE OBI_RELATION CASCADE CONSTRAINTS;
CREATE TABLE OBI_RELATION (
RELATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
RO_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT OBI_RELATION_PK PRIMARY KEY (RELATION_ID),
CONSTRAINT OBI_RELATION_UK UNIQUE(PARENT_ID, CHILD_ID, RO_ID)) TABLESPACE DATA02;
CREATE INDEX OBI_REL_CHILD_FK_INDEX ON OBI_RELATION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX OBI_REL_RO_FK_INDEX ON OBI_RELATION (RO_ID) TABLESPACE DATA02;
CREATE INDEX OBI_REL_SOURCE_FK_INDEX ON OBI_RELATION (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE OBI_RELATION
ADD CONSTRAINT OBI_REL_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES OBI (OBI_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE OBI_RELATION
ADD CONSTRAINT OBI_REL_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES OBI (OBI_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE OBI_RELATION
ADD CONSTRAINT OBI_REL_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE OBI_RELATION
ADD CONSTRAINT OBI_REL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON OBI_RELATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON OBI_RELATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON OBI_RELATION TO AUXILIARY;

DROP TABLE PSIMOD CASCADE CONSTRAINTS;
CREATE TABLE PSIMOD (
PSIMOD_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PSIMODID VARCHAR2(20) NOT NULL,
DESCRIPTION VARCHAR2(2000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PSIMOD_PK PRIMARY KEY (PSIMOD_ID),
CONSTRAINT PSIMOD_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE UNIQUE INDEX PSIMODID_UK_INDEX on PSIMOD (PSIMODID) TABLESPACE DATA02;
CREATE INDEX PSIMOD_SOURCE_FK_INDEX ON PSIMOD (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE PSIMOD
ADD CONSTRAINT PSIMOD_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PSIMOD TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON PSIMOD TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PSIMOD TO AUXILIARY;

DROP TABLE PSIMOD_URL CASCADE CONSTRAINTS;
CREATE TABLE PSIMOD_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL CHECK (DISPLAY_NAME IN ('BioPortal', 'OLS', 'Ontobee')),
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PSIMOD_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('BioPortal', 'OLS', 'Ontobee')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PSIMOD_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT PSIMOD_URL_UK UNIQUE (PSIMOD_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX PSIMOD_URL_SOURCE_FK_INDEX ON PSIMOD_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE PSIMOD_URL
ADD CONSTRAINT PSIMOD_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PSIMOD_URL
ADD CONSTRAINT PSIMOD_URL_PSIMOD_FK FOREIGN KEY (PSIMOD_ID) REFERENCES PSIMOD (PSIMOD_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PSIMOD_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PSIMOD_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PSIMOD_URL TO AUXILIARY;

DROP TABLE PSIMOD_RELATION CASCADE CONSTRAINTS;
CREATE TABLE PSIMOD_RELATION (
RELATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
RO_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PSIMOD_RELATION_PK PRIMARY KEY (RELATION_ID),
CONSTRAINT PSIMOD_RELATION_UK UNIQUE(PARENT_ID, CHILD_ID, RO_ID)) TABLESPACE DATA02;
CREATE INDEX PSIMOD_REL_CHILD_FK_INDEX ON PSIMOD_RELATION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX PSIMOD_REL_RO_FK_INDEX ON PSIMOD_RELATION (RO_ID) TABLESPACE DATA02;
CREATE INDEX PSIMOD_REL_SOURCE_FK_INDEX ON PSIMOD_RELATION (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE PSIMOD_RELATION
ADD CONSTRAINT PSIMOD_REL_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES PSIMOD (PSIMOD_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PSIMOD_RELATION
ADD CONSTRAINT PSIMOD_REL_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES PSIMOD (PSIMOD_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PSIMOD_RELATION
ADD CONSTRAINT PSIMOD_REL_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PSIMOD_RELATION
ADD CONSTRAINT PSIMOD_REL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PSIMOD_RELATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PSIMOD_RELATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PSIMOD_RELATION TO AUXILIARY;

DROP TABLE SO CASCADE CONSTRAINTS;
CREATE TABLE SO (
SO_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER NULL,
SOID VARCHAR2(20) NOT NULL,
DESCRIPTION VARCHAR2(2000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT SO_PK PRIMARY KEY (SO_ID),
CONSTRAINT SO_UK UNIQUE (FORMAT_NAME) ) TABLESPACE DATA02;
CREATE UNIQUE INDEX SOID_UK_INDEX on SO (SOID) TABLESPACE DATA02;
CREATE INDEX SO_SOURCE_FK_INDEX ON SO (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE SO
ADD CONSTRAINT SO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON SO TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON SO TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON SO TO AUXILIARY;

DROP TABLE SO_ALIAS CASCADE CONSTRAINTS;
CREATE TABLE SO_ALIAS (
ALIAS_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
SO_ID INTEGER NOT NULL,
ALIAS_TYPE VARCHAR2(40) NOT NULL CHECK (ALIAS_TYPE IN ('BROAD','EXACT','RELATED','NARROW')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT SO_ALIAS_PK PRIMARY KEY (ALIAS_ID),
CONSTRAINT SO_ALIAS_UK UNIQUE (SO_ID, DISPLAY_NAME, ALIAS_TYPE) ) TABLESPACE DATA02;
CREATE INDEX SO_ALIAS_SOURCE_FK_INDEX ON SO_ALIAS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE SO_ALIAS
ADD CONSTRAINT SO_ALIAS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE SO_ALIAS
ADD CONSTRAINT SO_ALIAS_SO_FK FOREIGN KEY (SO_ID) REFERENCES SO (SO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON SO_ALIAS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON SO_ALIAS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON SO_ALIAS TO AUXILIARY;

DROP TABLE SO_URL CASCADE CONSTRAINTS;
CREATE TABLE SO_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL CHECK (DISPLAY_NAME IN ('MISO','OLS')),
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
SO_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('MISO','OLS')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT SO_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT SO_URL_UK UNIQUE (SO_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX SO_URL_SOURCE_FK_INDEX ON SO_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE SO_URL
ADD CONSTRAINT SO_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE SO_URL
ADD CONSTRAINT SO_URL_SO_FK FOREIGN KEY (SO_ID) REFERENCES SO (SO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON SO_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON SO_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON SO_URL TO AUXILIARY;

DROP TABLE SO_RELATION CASCADE CONSTRAINTS;
CREATE TABLE SO_RELATION (
RELATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
RO_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT SO_RELATION_PK PRIMARY KEY (RELATION_ID),
CONSTRAINT SO_RELATION_UK UNIQUE(PARENT_ID, CHILD_ID, RO_ID)) TABLESPACE DATA02;
CREATE INDEX SO_REL_CHILD_FK_INDEX ON SO_RELATION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX SO_REL_RO_FK_INDEX ON SO_RELATION (RO_ID) TABLESPACE DATA02;
CREATE INDEX SO_REL_SOURCE_FK_INDEX ON SO_RELATION (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE SO_RELATION
ADD CONSTRAINT SO_REL_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES SO (SO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE SO_RELATION
ADD CONSTRAINT SO_REL_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES SO (SO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE SO_RELATION
ADD CONSTRAINT SO_REL_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE SO_RELATION
ADD CONSTRAINT SO_REL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON SO_RELATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON SO_RELATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON SO_RELATION TO AUXILIARY;

DROP TABLE TAXONOMY CASCADE CONSTRAINTS;
CREATE TABLE TAXONOMY (
TAXONOMY_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXID VARCHAR2(20) NOT NULL,
COMMON_NAME VARCHAR2(100) NULL,
RANK VARCHAR2(40) NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT TAXONOMY_PK PRIMARY KEY (TAXONOMY_ID),
CONSTRAINT TAXONOMY_UK UNIQUE (FORMAT_NAME) ) TABLESPACE DATA02;
CREATE UNIQUE INDEX TAXID_UK_INDEX on TAXONOMY (TAXID) TABLESPACE DATA02;
CREATE INDEX TAX_SOURCE_FK_INDEX ON TAXONOMY (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE TAXONOMY
ADD CONSTRAINT TAX_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON TAXONOMY TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON TAXONOMY TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON TAXONOMY TO AUXILIARY;

DROP TABLE TAXONOMY_ALIAS CASCADE CONSTRAINTS;
CREATE TABLE TAXONOMY_ALIAS (
ALIAS_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
TAXONOMY_ID INTEGER,
ALIAS_TYPE VARCHAR2(40) NOT NULL CHECK (ALIAS_TYPE IN ('Synonym','Secondary common name')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT TAXONOMY_ALIAS_PK PRIMARY KEY (ALIAS_ID),
CONSTRAINT TAXONOMY_ALIAS_UK UNIQUE (TAXONOMY_ID, DISPLAY_NAME, ALIAS_TYPE)) TABLESPACE DATA02;
CREATE INDEX TAX_ALIAS_SOURCE_FK_INDEX ON TAXONOMY_ALIAS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE TAXONOMY_ALIAS
ADD CONSTRAINT TAX_ALIAS_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE TAXONOMY_ALIAS
ADD CONSTRAINT TAX_ALIAS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON TAXONOMY_ALIAS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON TAXONOMY_ALIAS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON TAXONOMY_ALIAS TO AUXILIARY;

DROP TABLE TAXONOMY_URL CASCADE CONSTRAINTS;
CREATE TABLE TAXONOMY_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL CHECK (DISPLAY_NAME IN ('NCBI Taxonomy')),
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
TAXONOMY_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('NCBI Taxonomy')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT TAXONOMY_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT TAXONOMY_URL_UK UNIQUE (TAXONOMY_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX TAX_URL_SOURCE_FK_INDEX ON TAXONOMY_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE TAXONOMY_URL
ADD CONSTRAINT TAX_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE TAXONOMY_URL
ADD CONSTRAINT TAX_URL_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON TAXONOMY_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON TAXONOMY_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON TAXONOMY_URL TO AUXILIARY;

DROP TABLE TAXONOMY_RELATION CASCADE CONSTRAINTS;
CREATE TABLE TAXONOMY_RELATION (
RELATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
RO_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT TAXONOMY_RELATION_PK PRIMARY KEY (RELATION_ID),
CONSTRAINT TAXONOMY_RELATION_UK UNIQUE (PARENT_ID, CHILD_ID, RO_ID)) TABLESPACE DATA02;
CREATE INDEX TAX_REL_CHILD_FK_INDEX ON TAXONOMY_RELATION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX TAX_REL_RO_FK_INDEX ON TAXONOMY_RELATION (RO_ID) TABLESPACE DATA02;
CREATE INDEX TAX_REL_SOURCE_FK_INDEX ON TAXONOMY_RELATION (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE TAXONOMY_RELATION
ADD CONSTRAINT TAX_REL_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE TAXONOMY_RELATION
ADD CONSTRAINT TAX_REL_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE TAXONOMY_RELATION
ADD CONSTRAINT TAX_REL_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE TAXONOMY_RELATION
ADD CONSTRAINT TAX_REL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON TAXONOMY_RELATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON TAXONOMY_RELATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON TAXONOMY_RELATION TO AUXILIARY;

/* Dbentity (Locus, Reference, Strain, File) */

DROP TABLE DBENTITY CASCADE CONSTRAINTS;
CREATE TABLE DBENTITY (
DBENTITY_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
SGDID VARCHAR2(20) NOT NULL,
SUBCLASS VARCHAR2(40) NOT NULL CHECK (SUBCLASS IN ('FILE','LOCUS','REFERENCE','STRAIN', 'PATHWAY')),
DBENTITY_STATUS VARCHAR2(40) NOT NULL CHECK (DBENTITY_STATUS IN ('Active','Merged','Deleted','Archived')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT DBENTITY_PK PRIMARY KEY (DBENTITY_ID),
CONSTRAINT DBENTITY_UK UNIQUE (FORMAT_NAME, SUBCLASS) ) TABLESPACE DATA02;
CREATE INDEX DBENT_SOURCE_FK_INDEX ON DBENTITY (SOURCE_ID) TABLESPACE DATA02;
CREATE UNIQUE INDEX DBENT_SGDID_INDEX ON DBENTITY (SGDID) TABLESPACE DATA02;
ALTER TABLE DBENTITY
ADD CONSTRAINT DBENT_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON DBENTITY TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON DBENTITY TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DBENTITY TO AUXILIARY;

/* Locus */

DROP TABLE LOCUSDBENTITY CASCADE CONSTRAINTS;
CREATE TABLE LOCUSDBENTITY (
DBENTITY_ID INTEGER NOT NULL,
SYSTEMATIC_NAME VARCHAR2(40) NOT NULL,
GENE_NAME VARCHAR2(20),
QUALIFIER VARCHAR2(40) CHECK (QUALIFIER IN ('Verified','Uncharacterized','Dubious')),
GENETIC_POSITION NUMBER(5,2),
NAME_DESCRIPTION VARCHAR2(100),
HEADLINE VARCHAR2(70),
DESCRIPTION VARCHAR2(500),
HAS_SUMMARY NUMBER(1) NOT NULL,
HAS_SEQUENCE NUMBER(1) NOT NULL,
HAS_HISTORY NUMBER(1) NOT NULL,
HAS_LITERATURE NUMBER(1) NOT NULL,
HAS_GO NUMBER(1) NOT NULL,
HAS_PHENOTYPE NUMBER(1) NOT NULL,
HAS_INTERACTION NUMBER(1) NOT NULL,
HAS_EXPRESSION NUMBER(1) NOT NULL,
HAS_REGULATION NUMBER(1) NOT NULL,
HAS_PROTEIN NUMBER(1) NOT NULL,
HAS_SEQUENCE_SECTION NUMBER(1) NOT NULL,
CONSTRAINT LOCUSDBENTITY_PK PRIMARY KEY (DBENTITY_ID),
CONSTRAINT LOCUSDBENTITY_UK UNIQUE (SYSTEMATIC_NAME)) TABLESPACE DATA02;
ALTER TABLE LOCUSDBENTITY
ADD CONSTRAINT LOCUS_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON LOCUSDBENTITY TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUSDBENTITY TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUSDBENTITY TO AUXILIARY;

DROP TABLE LOCUS_ALIAS CASCADE CONSTRAINTS;
CREATE TABLE LOCUS_ALIAS (
ALIAS_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
LOCUS_ID INTEGER NOT NULL,
HAS_EXTERNAL_ID_SECTION NUMBER(1) NOT NULL,
ALIAS_TYPE VARCHAR2(40) NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT LOCUS_ALIAS_PK PRIMARY KEY (ALIAS_ID),
CONSTRAINT LOCUS_ALIAS_UK UNIQUE (LOCUS_ID, DISPLAY_NAME, ALIAS_TYPE) ) TABLESPACE DATA02;
CREATE INDEX LOCUS_ALIAS_SOURCE_FK_INDEX ON LOCUS_ALIAS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE LOCUS_ALIAS
ADD CONSTRAINT LOCUS_ALIAS_LOCUS_FK FOREIGN KEY (LOCUS_ID) REFERENCES LOCUSDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LOCUS_ALIAS
ADD CONSTRAINT LOCUS_ALIAS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON LOCUS_ALIAS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUS_ALIAS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUS_ALIAS TO AUXILIARY;

DROP TABLE LOCUS_URL CASCADE CONSTRAINTS;
CREATE TABLE LOCUS_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
LOCUS_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('External id','Internal web service','SGDID','Systematic name')),
PLACEMENT VARCHAR2(100),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT LOCUS_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT LOCUS_URL_UK UNIQUE (LOCUS_ID, DISPLAY_NAME, OBJ_URL, PLACEMENT ) ) TABLESPACE DATA02;
CREATE INDEX LOCUS_URL_SOURCE_FK_INDEX ON LOCUS_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE LOCUS_URL
ADD CONSTRAINT LOCUS_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LOCUS_URL
ADD CONSTRAINT LOCUS_URL_LOCUS_FK FOREIGN KEY (LOCUS_ID) REFERENCES LOCUSDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON LOCUS_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUS_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUS_URL TO AUXILIARY;

DROP TABLE LOCUS_RELATION CASCADE CONSTRAINTS;
CREATE TABLE LOCUS_RELATION (
RELATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
RO_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT LOCUS_RELATION_PK PRIMARY KEY (RELATION_ID),
CONSTRAINT LOCUS_RELATION_UK UNIQUE(PARENT_ID, CHILD_ID, RO_ID)) TABLESPACE DATA02;
CREATE INDEX LOCUS_REL_CHILD_FK_INDEX ON LOCUS_RELATION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX LOCUS_REL_RO_FK_INDEX ON LOCUS_RELATION (RO_ID) TABLESPACE DATA02;
CREATE INDEX LOCUS_REL_SOURCE_FK_INDEX ON LOCUS_RELATION (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE LOCUS_RELATION
ADD CONSTRAINT LOCUS_REL_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES LOCUSDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LOCUS_RELATION
ADD CONSTRAINT LOCUS_REL_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES LOCUSDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LOCUS_RELATION
ADD CONSTRAINT LOCUS_REL_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LOCUS_RELATION
ADD CONSTRAINT LOCUS_REL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON LOCUS_RELATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUS_RELATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUS_RELATION TO AUXILIARY;

/* Strain */

DROP TABLE STRAINDBENTITY CASCADE CONSTRAINTS;
CREATE TABLE STRAINDBENTITY (
DBENTITY_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
STRAIN_TYPE VARCHAR2(40) NOT NULL CHECK (STRAIN_TYPE IN ('Reference','Alternative Reference','Other')),
GENOTYPE VARCHAR2(500),
GENBANK_ID VARCHAR2(40),
ASSEMBLY_SIZE INTEGER,
FOLD_COVERAGE INTEGER,
SCAFFOLD_NUMBER INTEGER,
LONGEST_SCAFFOLD INTEGER,
SCAFFOLD_NFIFTY INTEGER,
FEATURE_COUNT INTEGER,
CONSTRAINT STRAINDBENTITY_PK PRIMARY KEY (DBENTITY_ID)) TABLESPACE DATA02;
CREATE INDEX STRAIN_TAX_FK_INDEX ON STRAINDBENTITY (TAXONOMY_ID) TABLESPACE DATA02;
ALTER TABLE STRAINDBENTITY
ADD CONSTRAINT STRAIN_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE STRAINDBENTITY
ADD CONSTRAINT STRAIN_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON STRAINDBENTITY TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON STRAINDBENTITY TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON STRAINDBENTITY TO AUXILIARY;

DROP TABLE STRAIN_URL CASCADE CONSTRAINTS;
CREATE TABLE STRAIN_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
STRAIN_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('Download','GenBank','PubMed','External id','Wiki')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT STRAIN_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT STRAIN_URL_UK UNIQUE (STRAIN_ID, DISPLAY_NAME, URL_TYPE) ) TABLESPACE DATA02;
CREATE INDEX STRAIN_URL_SOURCE_FK_INDEX ON STRAIN_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE STRAIN_URL
ADD CONSTRAINT STRAIN_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE STRAIN_URL
ADD CONSTRAINT STRAIN_URL_STRAIN_FK FOREIGN KEY (STRAIN_ID) REFERENCES STRAINDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON STRAIN_URL TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON STRAIN_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON STRAIN_URL TO AUXILIARY;

/* Pathway */

DROP TABLE PATHWAYBENTITY CASCADE CONSTRAINTS;
CREATE TABLE PATHWAYDBENTITY (
DBENTITY_ID INTEGER NOT NULL,
BIOCYC_ID VARCHAR2(40),
CONSTRAINT PATHWAYDBENTITY_PK PRIMARY KEY (DBENTITY_ID)) TABLESPACE DATA02;
ALTER TABLE PATHWAYDBENTITY
ADD CONSTRAINT PATHWAY_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PATHWAYDBENTITY TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON PATHWAYDBENTITY TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PATHWAYDBENTITY TO AUXILIARY;

DROP TABLE PATHWAY_ALIAS CASCADE CONSTRAINTS;
CREATE TABLE PATHWAY_ALIAS (
ALIAS_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PATHWAY_ID INTEGER NOT NULL,
ALIAS_TYPE VARCHAR2(40) NOT NULL CHECK (ALIAS_TYPE IN ('Synonym')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PATHWAY_ALIAS_PK PRIMARY KEY (ALIAS_ID),
CONSTRAINT PATHWAY_ALIAS_UK UNIQUE (PATHWAY_ID, DISPLAY_NAME, ALIAS_TYPE) ) TABLESPACE DATA02;
CREATE INDEX PATHWAY_ALIAS_SOURCE_FK_INDEX ON PATHWAY_ALIAS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE PATHWAY_ALIAS
ADD CONSTRAINT PATHWAY_ALIAS_PATHWAY_FK FOREIGN KEY (PATHWAY_ID) REFERENCES PATHWAYDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PATHWAY_ALIAS
ADD CONSTRAINT PATHWAY_ALIAS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PATHWAY_ALIAS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PATHWAY_ALIAS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PATHWAY_ALIAS TO AUXILIARY;

DROP TABLE PATHWAY_URL CASCADE CONSTRAINTS;
CREATE TABLE PATHWAY_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PATHWAY_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('BioCyc', 'YeastPathways')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PATHWAY_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT PATHWAY_URL_UK UNIQUE (PATHWAY_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX PATHWAYURL_SOURCE_FK_INDEX ON PATHWAY_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE PATHWAY_URL
ADD CONSTRAINT PATHWAYURL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PATHWAY_URL
ADD CONSTRAINT PATHWAYURL_PATH_FK FOREIGN KEY (PATHWAY_ID) REFERENCES PATHWAYDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PATHWAY_URL TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON PATHWAY_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PATHWAY_URL TO AUXILIARY;

/* File */

DROP TABLE FILEPATH CASCADE CONSTRAINTS;
CREATE TABLE FILEPATH (
FILEPATH_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
FILEPATH VARCHAR2(500) NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT FILEPATH_PK PRIMARY KEY (FILEPATH_ID),
CONSTRAINT FILEPATH_UK UNIQUE (FILEPATH)) TABLESPACE DATA02;
CREATE INDEX FILEPATH_SOURCE_FK_INDEX ON FILEPATH (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE FILEPATH
ADD CONSTRAINT FILEPATH_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON FILEPATH TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON FILEPATH TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON FILEPATH TO AUXILIARY;

DROP TABLE FILEDBENTITY CASCADE CONSTRAINTS;
CREATE TABLE FILEDBENTITY (
DBENTITY_ID INTEGER NOT NULL,
TOPIC_ID INTEGER NOT NULL,
DATA_ID INTEGER NOT NULL,
FORMAT_ID INTEGER NOT NULL,
FILE_EXTENSION VARCHAR2(10) NOT NULL,
FILE_DATE DATE NOT NULL,
IS_PUBLIC NUMBER(1) NOT NULL,
IS_IN_SPELL NUMBER(1) NOT NULL,
IS_IN_BROWSER NUMBER(1) NOT NULL,
MD5SUM VARCHAR2(32),
S3_URL VARCHAR2(500),
FILEPATH_ID INTEGER,
PREVIOUS_FILE_NAME VARCHAR2(100),
README_FILE_ID INTEGER,
DESCRIPTION VARCHAR2(2000),
CONSTRAINT FILEDBENTITY_PK PRIMARY KEY (DBENTITY_ID) ) TABLESPACE DATA02;
CREATE INDEX FILEDBENT_TOPIC_FK_INDEX ON FILEDBENTITY (TOPIC_ID) TABLESPACE DATA02;
CREATE INDEX FILEDBENT_DATA_FK_INDEX ON FILEDBENTITY (DATA_ID) TABLESPACE DATA02;
CREATE INDEX FILEDBENT_FORMAT_FK_INDEX ON FILEDBENTITY (FORMAT_ID) TABLESPACE DATA02;
CREATE INDEX FILEDBENT_FILEPATH_FK_INDEX ON FILEDBENTITY (FILEPATH_ID) TABLESPACE DATA02;
CREATE INDEX FILEDBENT_FILE_FK_INDEX ON FILEDBENTITY (README_FILE_ID) TABLESPACE DATA02;
CREATE INDEX FILEDBENT_MD5SUM_INDEX ON FILEDBENTITY (MD5SUM) TABLESPACE DATA02;
ALTER TABLE FILEDBENTITY
ADD CONSTRAINT FILEDBENT_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID);
ALTER TABLE FILEDBENTITY
ADD CONSTRAINT FILEDBENT_TOPIC_FK FOREIGN KEY (TOPIC_ID) REFERENCES EDAM (EDAM_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE FILEDBENTITY
ADD CONSTRAINT FILEDBENT_DATA_FK FOREIGN KEY (DATA_ID) REFERENCES EDAM (EDAM_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE FILEDBENTITY
ADD CONSTRAINT FILEDBENT_FORMAT_FK FOREIGN KEY (FORMAT_ID) REFERENCES EDAM (EDAM_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE FILEDBENTITY
ADD CONSTRAINT FILEDBENT_FILEPATH_FK FOREIGN KEY (FILEPATH_ID) REFERENCES FILEPATH (FILEPATH_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE FILEDBENTITY
ADD CONSTRAINT FILEDBENT_FILE_FK FOREIGN KEY (README_FILE_ID) REFERENCES FILEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON FILEDBENTITY TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON FILEDBENTITY TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON FILEDBENTITY TO AUXILIARY;

DROP TABLE FILE_KEYWORD CASCADE CONSTRAINTS;
CREATE TABLE FILE_KEYWORD (
FILE_KEYWORD_ID INTEGER NOT NULL,
FILE_ID INTEGER NOT NULL,
KEYWORD_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT FILE_KEYWORD_PK PRIMARY KEY (FILE_KEYWORD_ID),
CONSTRAINT FILE_KEYWORD_UK UNIQUE (FILE_ID, KEYWORD_ID)) TABLESPACE DATA02;
CREATE INDEX FILE_KEY_KEY_FK_INDEX ON FILE_KEYWORD (KEYWORD_ID) TABLESPACE DATA02;
CREATE INDEX FILE_KEY_SOURCE_FK_INDEX ON FILE_KEYWORD (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE FILE_KEYWORD
ADD CONSTRAINT FILE_KEY_KEY_FK FOREIGN KEY (KEYWORD_ID) REFERENCES KEYWORD (KEYWORD_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE FILE_KEYWORD
ADD CONSTRAINT FILE_KEY_FILE_FK FOREIGN KEY (FILE_ID) REFERENCES FILEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE FILE_KEYWORD
ADD CONSTRAINT FILE_KEY_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON FILE_KEYWORD TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON FILE_KEYWORD TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON FILE_KEYWORD TO AUXILIARY;

/* Reference */

DROP TABLE BOOK CASCADE CONSTRAINTS;
CREATE TABLE BOOK (
BOOK_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
TITLE VARCHAR2(200) NOT NULL,
VOLUME_TITLE VARCHAR2(200),
ISBN VARCHAR2(20),
TOTAL_PAGES INTEGER,
PUBLISHER VARCHAR2(100),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT BOOK_PK PRIMARY KEY (BOOK_ID),
CONSTRAINT BOOK_UK UNIQUE (TITLE, VOLUME_TITLE) ) TABLESPACE DATA02;
CREATE INDEX BOOK_SOURCE_FK_INDEX ON BOOK (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE BOOK
ADD CONSTRAINT BOOK_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON BOOK TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON BOOK TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON BOOK TO AUXILIARY;

DROP TABLE JOURNAL CASCADE CONSTRAINTS;
CREATE TABLE JOURNAL (
JOURNAL_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
MED_ABBR VARCHAR2(100),
TITLE VARCHAR2(200),
ISSN_PRINT VARCHAR2(10),
ISSN_ELECTRONIC VARCHAR2(10),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT JOURNAL_PK PRIMARY KEY (JOURNAL_ID),
CONSTRAINT JOURNAL_UK UNIQUE (MED_ABBR, TITLE) ) TABLESPACE DATA02;
CREATE INDEX JOURNAL_SOURCE_FK_INDEX ON JOURNAL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE JOURNAL
ADD CONSTRAINT JOURNAL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON JOURNAL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON JOURNAL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON JOURNAL TO AUXILIARY;

DROP TABLE REFERENCEDBENTITY CASCADE CONSTRAINTS;
CREATE TABLE REFERENCEDBENTITY (
DBENTITY_ID INTEGER NOT NULL,
METHOD_OBTAINED VARCHAR2(40) NOT NULL CHECK (METHOD_OBTAINED IN ('Curator PubMed reference','Curator triage','Curator non-PubMed reference','Gene registry','PDB script','PubMed script','SacchDB','YPD')),
PUBLICATION_STATUS VARCHAR2(40) NOT NULL CHECK (PUBLICATION_STATUS IN ('Epub ahead of print','In preparation','In press','Published','Submitted','Unpublished')),
FULLTEXT_STATUS VARCHAR2(40) NOT NULL CHECK (FULLTEXT_STATUS IN ('N', 'NAA', 'NAM', 'NAP', 'Y', 'YF', 'YT')),
CITATION VARCHAR2(500) NOT NULL,
YEAR NUMBER(4) NOT NULL,
PMID INTEGER,
PMCID VARCHAR2(20),
DATE_PUBLISHED VARCHAR2(40),
DATE_REVISED DATE,
ISSUE VARCHAR2(100),
PAGE VARCHAR2(40),
VOLUME VARCHAR2(40),
TITLE VARCHAR2(400),
DOI VARCHAR2(100),
JOURNAL_ID INTEGER,
BOOK_ID INTEGER,
CONSTRAINT REFERENCE_PK PRIMARY KEY (DBENTITY_ID),
CONSTRAINT REFERENCE_CITATION_UK UNIQUE (CITATION)) TABLESPACE DATA02;
CREATE INDEX REF_BOOK_FK_INDEX ON REFERENCEDBENTITY (BOOK_ID) TABLESPACE DATA02;
CREATE INDEX REF_JOURNAL_FK_INDEX ON REFERENCEDBENTITY (JOURNAL_ID) TABLESPACE DATA02;
CREATE UNIQUE INDEX REF_PMID_INDEX ON REFERENCEDBENTITY (PMID) TABLESPACE DATA02;
CREATE UNIQUE INDEX REF_PMCID_INDEX ON REFERENCEDBENTITY (PMCID) TABLESPACE DATA02;
ALTER TABLE REFERENCEDBENTITY
ADD CONSTRAINT REF_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID);
ALTER TABLE REFERENCEDBENTITY
ADD CONSTRAINT REF_JOURNAL_FK FOREIGN KEY (JOURNAL_ID) REFERENCES JOURNAL (JOURNAL_ID)
ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REFERENCEDBENTITY
ADD CONSTRAINT REF_BOOK_FK FOREIGN KEY (BOOK_ID) REFERENCES BOOK (BOOK_ID)
ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON REFERENCEDBENTITY TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCEDBENTITY TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCEDBENTITY TO AUXILIARY;

DROP TABLE REFERENCE_ALIAS CASCADE CONSTRAINTS;
CREATE TABLE REFERENCE_ALIAS (
ALIAS_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
REFERENCE_ID INTEGER NOT NULL,
ALIAS_TYPE VARCHAR2(40) NOT NULL CHECK (ALIAS_TYPE IN ('Secondary SGDID')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REFERENCE_ALIAS_PK PRIMARY KEY (ALIAS_ID),
CONSTRAINT REFERENCE_ALIAS_UK UNIQUE (REFERENCE_ID, DISPLAY_NAME, ALIAS_TYPE) ) TABLESPACE DATA02;
CREATE INDEX REF_ALIAS_SOURCE_FK_INDEX ON REFERENCE_ALIAS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE REFERENCE_ALIAS
ADD CONSTRAINT REF_ALIAS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REFERENCE_ALIAS
ADD CONSTRAINT REF_ALIAS_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON REFERENCE_ALIAS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_ALIAS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_ALIAS TO AUXILIARY;

DROP TABLE REFERENCE_URL CASCADE CONSTRAINTS;
CREATE TABLE REFERENCE_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
REFERENCE_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('DOI full text','PMC full text','PubMed','PubMedCentral','Reference supplement')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REFERENCE_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT REFERENCE_URL_UK UNIQUE (REFERENCE_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX REF_URL_SOURCE_FK_INDEX ON REFERENCE_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE REFERENCE_URL
ADD CONSTRAINT REF_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REFERENCE_URL
ADD CONSTRAINT REF_URL_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON REFERENCE_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_URL TO AUXILIARY;

DROP TABLE REFERENCE_REFTYPE CASCADE CONSTRAINTS;
CREATE TABLE REFERENCE_REFTYPE (
REFERENCE_REFTYPE_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
REFERENCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REFERENCE_REFTYPE_PK PRIMARY KEY (REFERENCE_REFTYPE_ID),
CONSTRAINT REFERENCE_REFTYPE_UK UNIQUE (REFERENCE_ID, DISPLAY_NAME) ) TABLESPACE DATA02;
CREATE INDEX REFREFTYPE_SOURCE_FK_INDEX ON REFERENCE_REFTYPE (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE REFERENCE_REFTYPE
ADD CONSTRAINT REFREFTYPE_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REFERENCE_REFTYPE
ADD CONSTRAINT REFREFTYPE_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON REFERENCE_REFTYPE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_REFTYPE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_REFTYPE TO AUXILIARY;

DROP TABLE REFERENCE_CORRECTION CASCADE CONSTRAINTS;
CREATE TABLE REFERENCE_CORRECTION (
REFERENCE_CORRECTION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
PARENT_ID INTEGER NOT NULL,
CHILD_ID INTEGER NOT NULL,
CORRECTION_TYPE VARCHAR2(40) NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REFERENCE_CORRECTION_PK PRIMARY KEY (REFERENCE_CORRECTION_ID),
CONSTRAINT REFERENCE_CORRECTION_UK UNIQUE (PARENT_ID, CHILD_ID, CORRECTION_TYPE)) TABLESPACE DATA02;
CREATE INDEX REF_CORR_PARENT_FK_INDEX ON REFERENCE_CORRECTION (PARENT_ID) TABLESPACE DATA02;
CREATE INDEX REF_CORR_CHILD_FK_INDEX ON REFERENCE_CORRECTION (CHILD_ID) TABLESPACE DATA02;
CREATE INDEX REF_CORR_SOURCE_FK_INDEX ON REFERENCE_CORRECTION (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE REFERENCE_CORRECTION
ADD CONSTRAINT REF_CORR_CHILD_FK FOREIGN KEY (CHILD_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REFERENCE_CORRECTION
ADD CONSTRAINT REF_CORR_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REFERENCE_CORRECTION
ADD CONSTRAINT REF_CORR_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON REFERENCE_CORRECTION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_CORRECTION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_CORRECTION TO AUXILIARY;

DROP TABLE REFERENCE_DOCUMENT CASCADE CONSTRAINTS;
CREATE TABLE REFERENCE_DOCUMENT (
REFERENCE_DOCUMENT_ID INTEGER NOT NULL,
DOCUMENT_TYPE VARCHAR2(40) NOT NULL CHECK (DOCUMENT_TYPE IN ('Abstract','Medline')),
TEXT CLOB NOT NULL,
HTML CLOB NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
REFERENCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REFERENCE_DOCUMENT_PK PRIMARY KEY (REFERENCE_DOCUMENT_ID),
CONSTRAINT REFERENCE_DOCUMENT_UK UNIQUE (REFERENCE_ID, DOCUMENT_TYPE)) TABLESPACE DATA04
LOB (TEXT) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none),
LOB (HTML) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX REF_DOC_SOURCE_FK_INDEX ON REFERENCE_DOCUMENT (SOURCE_ID) TABLESPACE DATA04;
CREATE INDEX REF_DOC_REF_FK_INDEX ON REFERENCE_DOCUMENT (REFERENCE_ID) TABLESPACE DATA04;
ALTER TABLE REFERENCE_DOCUMENT
ADD CONSTRAINT REF_DOC_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REFERENCE_DOCUMENT
ADD CONSTRAINT REF_DOC_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON REFERENCE_DOCUMENT TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_DOCUMENT TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_DOCUMENT TO AUXILIARY;

DROP TABLE REFERENCE_AUTHOR CASCADE CONSTRAINTS;
CREATE TABLE REFERENCE_AUTHOR (
REFERENCE_AUTHOR_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
REFERENCE_ID INTEGER NOT NULL,
ORCID VARCHAR2(20),
AUTHOR_ORDER INTEGER NOT NULL,
AUTHOR_TYPE VARCHAR2(10) NOT NULL CHECK (AUTHOR_TYPE IN ('Author','Editor')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REFERENCE_AUTHOR_PK PRIMARY KEY (REFERENCE_AUTHOR_ID),
CONSTRAINT REFERENCE_AUTHOR_UK UNIQUE (REFERENCE_ID, DISPLAY_NAME, AUTHOR_ORDER) ) TABLESPACE DATA02;
CREATE INDEX REFAUTH_SOURCE_FK_INDEX ON REFERENCE_AUTHOR (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE REFERENCE_AUTHOR
ADD CONSTRAINT REFAUTH_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REFERENCE_AUTHOR
ADD CONSTRAINT REFAUTH_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON REFERENCE_AUTHOR TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_AUTHOR TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_AUTHOR TO AUXILIARY;

DROP TABLE REFERENCE_FILE CASCADE CONSTRAINTS;
CREATE TABLE REFERENCE_FILE (
REFERENCE_FILE_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
FILE_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REFERENCE_FILE_PK PRIMARY KEY (REFERENCE_FILE_ID),
CONSTRAINT REFERENCE_FILE_UK UNIQUE (REFERENCE_ID, FILE_ID)) TABLESPACE DATA02;
CREATE INDEX REF_FILE_SOURCE_FK_INDEX ON REFERENCE_FILE (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX REF_FILE_FILE_FK_INDEX ON REFERENCE_FILE (FILE_ID) TABLESPACE DATA02;
ALTER TABLE REFERENCE_FILE
ADD CONSTRAINT REF_FILE_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REFERENCE_FILE
ADD CONSTRAINT REF_FILE_FILE_FK FOREIGN KEY (FILE_ID) REFERENCES FILEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REFERENCE_FILE
ADD CONSTRAINT REF_FILE_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON REFERENCE_FILE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_FILE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_FILE TO AUXILIARY;

DROP TABLE REFERENCE_UNLINK CASCADE CONSTRAINTS;
CREATE TABLE REFERENCE_UNLINK (
REFERENCE_UNLINK_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
BUD_ID INTEGER,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REFERENCE_UNLINK_PK PRIMARY KEY (REFERENCE_UNLINK_ID),
CONSTRAINT REFERENCE_UNLINK_UK UNIQUE (REFERENCE_ID, DBENTITY_ID) ) TABLESPACE DATA02;
CREATE INDEX REFUNLINK_DBENT_FK_INDEX ON REFERENCE_UNLINK (DBENTITY_ID) TABLESPACE DATA02;
ALTER TABLE REFERENCE_UNLINK
ADD CONSTRAINT REFUNLINK_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REFERENCE_UNLINK
ADD CONSTRAINT REFUNLINK_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON REFERENCE_UNLINK TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_UNLINK TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_UNLINK TO AUXILIARY;

DROP TABLE REFERENCE_DELETED CASCADE CONSTRAINTS;
CREATE TABLE REFERENCE_DELETED (
REFERENCE_DELETED_ID INTEGER NOT NULL,
PMID INTEGER NOT NULL,
SGDID VARCHAR2(20),
BUD_ID INTEGER,
REASON_DELETED VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REFERENCE_DELETED_PK PRIMARY KEY (REFERENCE_DELETED_ID),
CONSTRAINT REFERENCE_DELETED_PUBMED_UK UNIQUE (PMID),
CONSTRAINT REFERENCE_DELETED_SGDID_UK UNIQUE (SGDID)) TABLESPACE DATA02;
GRANT SELECT ON REFERENCE_DELETED TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON REFERENCE_DELETED TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCE_DELETED TO AUXILIARY;

/*Colleague */

DROP TABLE COLLEAGUE CASCADE CONSTRAINTS;
CREATE TABLE COLLEAGUE (
COLLEAGUE_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
ORCID VARCHAR2(20), 
LAST_NAME VARCHAR2(40) NOT NULL,
FIRST_NAME VARCHAR2(40) NOT NULL,
SUFFIX VARCHAR2(4) CHECK (SUFFIX IN ('II','III','IV','Jr.','Sr.')),
OTHER_LAST_NAME VARCHAR2(40),
PROFESSION VARCHAR2(100),
JOB_TITLE VARCHAR2(100),
INSTITUTION VARCHAR2(100),
ADDRESS1 VARCHAR2(100),
ADDRESS2 VARCHAR2(100),
ADDRESS3 VARCHAR2(100),
CITY VARCHAR2(50),
STATE VARCHAR2(50),
COUNTRY VARCHAR2(40),
POSTAL_CODE VARCHAR2(40),
WORK_PHONE VARCHAR2(40),
OTHER_PHONE VARCHAR2(40),
FAX VARCHAR2(40),
EMAIL VARCHAR2(100),
COLLEGUE_NOTE VARCHAR2(1000),
RESEARCH_INTEREST VARCHAR2(4000),
IS_PI NUMBER(1) NOT NULL,
IS_CONTACT NUMBER(1) NOT NULL,
DISPLAY_EMAIL NUMBER(1) NOT NULL,
DATE_LAST_MODIFIED DATE DEFAULT SYSDATE NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT COLLEAGUE_PK PRIMARY KEY (COLLEAGUE_ID),
CONSTRAINT COLLEAGUE_UK UNIQUE (FORMAT_NAME) ) TABLESPACE DATA02;
CREATE UNIQUE INDEX ORCID_UK_INDEX on COLLEAGUE (ORCID) TABLESPACE DATA02;
CREATE INDEX COLL_SOURCE_FK_INDEX ON COLLEAGUE (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE COLLEAGUE
ADD CONSTRAINT COLL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON COLLEAGUE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUE TO AUXILIARY;

DROP TABLE COLLEAGUE_URL CASCADE CONSTRAINTS;
CREATE TABLE COLLEAGUE_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
COLLEAGUE_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('Lab','Research summary')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT COLLEAGUE_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT COLLEAGUE_URL_UK UNIQUE (COLLEAGUE_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX COLL_URL_SOURCE_FK_INDEX ON COLLEAGUE_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE COLLEAGUE_URL
ADD CONSTRAINT COLL_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE COLLEAGUE_URL
ADD CONSTRAINT COLL_URL_COLL_FK FOREIGN KEY (COLLEAGUE_ID) REFERENCES COLLEAGUE (COLLEAGUE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON COLLEAGUE_URL TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON COLLEAGUE_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUE_URL TO AUXILIARY;

DROP TABLE COLLEAGUE_ASSOCIATION CASCADE CONSTRAINTS;
CREATE TABLE COLLEAGUE_ASSOCIATION (
COLLEAGUE_ASSOCIATION_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
COLLEAGUE_ID INTEGER NOT NULL,
ASSOCIATE_ID INTEGER NOT NULL,
ASSOCIATION_TYPE VARCHAR2(40) NOT NULL CHECK (ASSOCIATION_TYPE IN ('Associate','Lab member', 'Head of Lab')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT COLLEAGUE_ASSOCIATION_PK PRIMARY KEY (COLLEAGUE_ASSOCIATION_ID),
CONSTRAINT COLLEAGUE_ASSOCIATION_UK UNIQUE (COLLEAGUE_ID, ASSOCIATE_ID, ASSOCIATION_TYPE) ) TABLESPACE DATA02;
CREATE INDEX COLL_ASSOC_SOURCE_FK_INDEX ON COLLEAGUE_ASSOCIATION (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX COLL_ASSOC_ASSOC_FK_INDEX ON COLLEAGUE_ASSOCIATION (ASSOCIATE_ID) TABLESPACE DATA02;
ALTER TABLE COLLEAGUE_ASSOCIATION
ADD CONSTRAINT COLL_ASSOC_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE COLLEAGUE_ASSOCIATION
ADD CONSTRAINT COLL_ASSOC_ASSOC_FK FOREIGN KEY (ASSOCIATE_ID) REFERENCES COLLEAGUE (COLLEAGUE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE COLLEAGUE_ASSOCIATION
ADD CONSTRAINT COLL_ASSOC_COLL_FK FOREIGN KEY (COLLEAGUE_ID) REFERENCES COLLEAGUE (COLLEAGUE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON COLLEAGUE_ASSOCIATION TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON COLLEAGUE_ASSOCIATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUE_ASSOCIATION TO AUXILIARY;

DROP TABLE COLLEAGUE_KEYWORD CASCADE CONSTRAINTS;
CREATE TABLE COLLEAGUE_KEYWORD (
COLLEAGUE_KEYWORD_ID INTEGER NOT NULL,
COLLEAGUE_ID INTEGER NOT NULL,
KEYWORD_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT COLLEAGUE_KEYWORD_PK PRIMARY KEY (COLLEAGUE_KEYWORD_ID),
CONSTRAINT COLLEAGUE_KEYWORD_UK UNIQUE (KEYWORD_ID, COLLEAGUE_ID)) TABLESPACE DATA02;
CREATE INDEX COLL_KEY_COLL_FK_INDEX ON COLLEAGUE_KEYWORD (COLLEAGUE_ID) TABLESPACE DATA02;
CREATE INDEX COLL_KEY_SOURCE_FK_INDEX ON COLLEAGUE_KEYWORD (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE COLLEAGUE_KEYWORD
ADD CONSTRAINT COLL_KEY_KEY_FK FOREIGN KEY (KEYWORD_ID) REFERENCES KEYWORD (KEYWORD_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE COLLEAGUE_KEYWORD
ADD CONSTRAINT COLL_KEY_COLL_FK FOREIGN KEY (COLLEAGUE_ID) REFERENCES COLLEAGUE (COLLEAGUE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE COLLEAGUE_KEYWORD
ADD CONSTRAINT COLL_KEY_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON COLLEAGUE_KEYWORD TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUE_KEYWORD TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUE_KEYWORD TO AUXILIARY;

DROP TABLE COLLEAGUE_LOCUS CASCADE CONSTRAINTS;
CREATE TABLE COLLEAGUE_LOCUS (
COLLEAGUE_LOCUS_ID INTEGER NOT NULL,
COLLEAGUE_ID INTEGER NOT NULL,
LOCUS_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT COLLEAGUE_LOCUS_PK PRIMARY KEY (COLLEAGUE_LOCUS_ID),
CONSTRAINT COLLEAGUE_LOCUS_UK UNIQUE (COLLEAGUE_ID, LOCUS_ID) ) TABLESPACE DATA02;
CREATE INDEX COLL_LOCUS_LOCUS_FK_INDEX ON COLLEAGUE_LOCUS (LOCUS_ID) TABLESPACE DATA02;
CREATE INDEX COLL_LOCUS_SOURCE_FK_INDEX ON COLLEAGUE_LOCUS (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE COLLEAGUE_LOCUS
ADD CONSTRAINT COLL_LOCUS_COLL_FK FOREIGN KEY (COLLEAGUE_ID) REFERENCES COLLEAGUE (COLLEAGUE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE COLLEAGUE_LOCUS
ADD CONSTRAINT COLL_LOCUS_LOCUS_FK FOREIGN KEY (LOCUS_ID) REFERENCES LOCUSDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE COLLEAGUE_LOCUS
ADD CONSTRAINT COLL_LOCUS_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON COLLEAGUE_LOCUS TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUE_LOCUS TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUE_LOCUS TO AUXILIARY;

DROP TABLE COLLEAGUE_REFERENCE CASCADE CONSTRAINTS;
CREATE TABLE COLLEAGUE_REFERENCE (
COLLEAGUE_REFERENCE_ID INTEGER NOT NULL,
COLLEAGUE_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT COLLEAGUE_REFERENCE_PK PRIMARY KEY (COLLEAGUE_REFERENCE_ID),
CONSTRAINT COLLEAGUE_REFERENCE_UK UNIQUE (COLLEAGUE_ID, REFERENCE_ID) ) TABLESPACE DATA02;
CREATE INDEX COLL_REF_REF_FK_INDEX ON COLLEAGUE_REFERENCE (REFERENCE_ID) TABLESPACE DATA02;
CREATE INDEX COLL_REF_SOURCE_FK_INDEX ON COLLEAGUE_REFERENCE (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE COLLEAGUE_REFERENCE
ADD CONSTRAINT COLL_REF_COLL_FK FOREIGN KEY (COLLEAGUE_ID) REFERENCES COLLEAGUE (COLLEAGUE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE COLLEAGUE_REFERENCE
ADD CONSTRAINT COLL_REF_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE COLLEAGUE_REFERENCE
ADD CONSTRAINT COLL_REF_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON COLLEAGUE_REFERENCE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUE_REFERENCE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUE_REFERENCE TO AUXILIARY;

/* Data Objects */
/* Summaries */

DROP TABLE LOCUS_SUMMARY CASCADE CONSTRAINTS;
CREATE TABLE LOCUS_SUMMARY (
SUMMARY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
LOCUS_ID INTEGER NOT NULL,
SUMMARY_TYPE VARCHAR2(40) NOT NULL CHECK (SUMMARY_TYPE IN ('Gene','Function','Phenotype','Regulation')),
SUMMARY_ORDER INTEGER DEFAULT 1 NOT NULL,
TEXT CLOB NOT NULL,
HTML CLOB NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT LOCUS_SUMMARY_PK PRIMARY KEY (SUMMARY_ID),
CONSTRAINT LOCUS_SUMMARY_UK UNIQUE (LOCUS_ID, SUMMARY_TYPE, SUMMARY_ORDER)) TABLESPACE DATA02
LOB (TEXT) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none),
LOB (HTML) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX LOCUS_SUM_SOURCE_FK_INDEX ON LOCUS_SUMMARY (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE LOCUS_SUMMARY
ADD CONSTRAINT LOCUS_SUM_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LOCUS_SUMMARY
ADD CONSTRAINT LOCUS_SUM_LOCUS_FK FOREIGN KEY (LOCUS_ID) REFERENCES LOCUSDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON LOCUS_SUMMARY TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUS_SUMMARY TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUS_SUMMARY TO AUXILIARY;

DROP TABLE LOCUS_SUMMARY_REFERENCE CASCADE CONSTRAINTS;
CREATE TABLE LOCUS_SUMMARY_REFERENCE (
SUMMARY_REFERENCE_ID INTEGER NOT NULL,
SUMMARY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
REFERENCE_ORDER INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT LOCUS_SUMMARY_REFERENCE_PK PRIMARY KEY (SUMMARY_REFERENCE_ID),
CONSTRAINT LOCUS_SUMMARY_REFERENCE_UK UNIQUE (SUMMARY_ID, REFERENCE_ID)) TABLESPACE DATA02;
CREATE INDEX LOCUS_SUM_REF_SOURCE_FK_INDEX ON LOCUS_SUMMARY_REFERENCE (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX LOCUS_SUM_REF_REF_FK_INDEX ON LOCUS_SUMMARY_REFERENCE (REFERENCE_ID) TABLESPACE DATA02;
ALTER TABLE LOCUS_SUMMARY_REFERENCE
ADD CONSTRAINT LOCUS_SUM_REF_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LOCUS_SUMMARY_REFERENCE
ADD CONSTRAINT LOCUS_SUM_REF_SUM_FK FOREIGN KEY (SUMMARY_ID) REFERENCES LOCUS_SUMMARY (SUMMARY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LOCUS_SUMMARY_REFERENCE
ADD CONSTRAINT LOCUS_SUM_REF_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON LOCUS_SUMMARY_REFERENCE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUS_SUMMARY_REFERENCE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUS_SUMMARY_REFERENCE TO AUXILIARY;

DROP TABLE STRAIN_SUMMARY CASCADE CONSTRAINTS;
CREATE TABLE STRAIN_SUMMARY (
SUMMARY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
STRAIN_ID INTEGER NOT NULL,
SUMMARY_TYPE VARCHAR2(40) NOT NULL CHECK (SUMMARY_TYPE IN ('Strain')),
TEXT CLOB NOT NULL,
HTML CLOB NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT STRAIN_SUMMARY_PK PRIMARY KEY (SUMMARY_ID),
CONSTRAINT STRAIN_SUMMARY_UK UNIQUE (STRAIN_ID, SUMMARY_TYPE)) TABLESPACE DATA02
LOB (TEXT) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none),
LOB (HTML) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX STRAIN_SUM_SOURCE_FK_INDEX ON STRAIN_SUMMARY (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE STRAIN_SUMMARY
ADD CONSTRAINT STRAIN_SUM_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE STRAIN_SUMMARY
ADD CONSTRAINT STRAIN_SUM_STRAIN_FK FOREIGN KEY (STRAIN_ID) REFERENCES STRAINDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON STRAIN_SUMMARY TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON STRAIN_SUMMARY TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON STRAIN_SUMMARY TO AUXILIARY;

DROP TABLE STRAIN_SUMMARY_REFERENCE CASCADE CONSTRAINTS;
CREATE TABLE STRAIN_SUMMARY_REFERENCE (
SUMMARY_REFERENCE_ID INTEGER NOT NULL,
SUMMARY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
REFERENCE_ORDER INTEGER,
SOURCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT STRAIN_SUMMARY_REFERENCE_PK PRIMARY KEY (SUMMARY_REFERENCE_ID),
CONSTRAINT STRAIN_SUMMARY_REFERENCE_UK UNIQUE (SUMMARY_ID, REFERENCE_ID)) TABLESPACE DATA02;
CREATE INDEX STRAIN_SUM_REF_SOURCE_FK_INDEX ON STRAIN_SUMMARY_REFERENCE (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX STRAIN_SUM_REF_REF_FK_INDEX ON STRAIN_SUMMARY_REFERENCE (REFERENCE_ID) TABLESPACE DATA02;
ALTER TABLE STRAIN_SUMMARY_REFERENCE
ADD CONSTRAINT STRAIN_SUM_REF_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE STRAIN_SUMMARY_REFERENCE
ADD CONSTRAINT STRAIN_SUM_REF_SUM_FK FOREIGN KEY (SUMMARY_ID) REFERENCES STRAIN_SUMMARY (SUMMARY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE STRAIN_SUMMARY_REFERENCE
ADD CONSTRAINT STRAIN_SUM_REF_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON STRAIN_SUMMARY_REFERENCE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON STRAIN_SUMMARY_REFERENCE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON STRAIN_SUMMARY_REFERENCE TO AUXILIARY;

DROP TABLE PATHWAY_SUMMARY CASCADE CONSTRAINTS;
CREATE TABLE PATHWAY_SUMMARY (
SUMMARY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PATHWAY_ID INTEGER NOT NULL,
SUMMARY_TYPE VARCHAR2(40) NOT NULL CHECK (SUMMARY_TYPE IN ('Metabolic')),
TEXT CLOB NOT NULL,
HTML CLOB NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PATHWAY_SUMMARY_PK PRIMARY KEY (SUMMARY_ID),
CONSTRAINT PATHWAY_SUMMARY_UK UNIQUE (PATHWAY_ID, SUMMARY_TYPE)) TABLESPACE DATA02
LOB (TEXT) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none),
LOB (HTML) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX PATHWAYSUM_SOURCE_FK_INDEX ON PATHWAY_SUMMARY (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE PATHWAY_SUMMARY
ADD CONSTRAINT PATHWAYSUM_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PATHWAY_SUMMARY
ADD CONSTRAINT PATHWAYSUM_PATH_FK FOREIGN KEY (PATHWAY_ID) REFERENCES PATHWAYDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PATHWAY_SUMMARY TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PATHWAY_SUMMARY TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PATHWAY_SUMMARY TO AUXILIARY;

DROP TABLE PATHWAY_SUMMARY_REFERENCE CASCADE CONSTRAINTS;
CREATE TABLE PATHWAY_SUMMARY_REFERENCE (
SUMMARY_REFERENCE_ID INTEGER NOT NULL,
SUMMARY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
REFERENCE_ORDER INTEGER,
SOURCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PATHWAY_SUMMARY_REFERENCE_PK PRIMARY KEY (SUMMARY_REFERENCE_ID),
CONSTRAINT PATHWAY_SUMMARY_REFERENCE_UK UNIQUE (SUMMARY_ID, REFERENCE_ID)) TABLESPACE DATA02;
CREATE INDEX PATHWAYSUMREF_SOURCE_FK_INDEX ON PATHWAY_SUMMARY_REFERENCE (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX PATHWAYSUMREF_REF_FK_INDEX ON PATHWAY_SUMMARY_REFERENCE (REFERENCE_ID) TABLESPACE DATA02;
ALTER TABLE PATHWAY_SUMMARY_REFERENCE
ADD CONSTRAINT PATHWAYSUMREF_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PATHWAY_SUMMARY_REFERENCE
ADD CONSTRAINT PATHWAYSUMREF_SUM_FK FOREIGN KEY (SUMMARY_ID) REFERENCES PATHWAY_SUMMARY (SUMMARY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PATHWAY_SUMMARY_REFERENCE
ADD CONSTRAINT PATHWAYSUMREF_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PATHWAY_SUMMARY_REFERENCE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PATHWAY_SUMMARY_REFERENCE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PATHWAY_SUMMARY_REFERENCE TO AUXILIARY;

/* Gene reservations */

DROP TABLE RESERVEDNAME CASCADE CONSTRAINTS;
CREATE TABLE RESERVEDNAME (
RESERVEDNAME_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
LOCUS_ID INTEGER,
REFERENCE_ID INTEGER,
COLLEAGUE_ID INTEGER NOT NULL,
RESERVATION_DATE DATE DEFAULT SYSDATE NOT NULL,
EXPIRATION_DATE DATE DEFAULT SYSDATE + 365 NOT NULL,
DESCRIPTION VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT RESERVEDNAME_PK PRIMARY KEY (RESERVEDNAME_ID),
CONSTRAINT RESERVEDNAME_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA01;
CREATE INDEX RESERVEDNAME_SOURCE_FK_INDEX ON RESERVEDNAME (SOURCE_ID) TABLESPACE DATA01;
CREATE INDEX RESERVEDNAME_LOCUS_FK_INDEX ON RESERVEDNAME (LOCUS_ID) TABLESPACE DATA01;
CREATE INDEX RESERVEDNAME_REF_FK_INDEX ON RESERVEDNAME (REFERENCE_ID) TABLESPACE DATA01;
CREATE INDEX RESERVEDNAME_COLL_FK_INDEX ON RESERVEDNAME (COLLEAGUE_ID) TABLESPACE DATA01;
ALTER TABLE RESERVEDNAME
ADD CONSTRAINT RESERVEDNAME_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE RESERVEDNAME
ADD CONSTRAINT RESERVEDNAME_LOCUS_FK FOREIGN KEY (LOCUS_ID) REFERENCES LOCUSDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE RESERVEDNAME
ADD CONSTRAINT RESERVEDNAME_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE RESERVEDNAME
ADD CONSTRAINT RESERVEDNAME_COLL_FK FOREIGN KEY (COLLEAGUE_ID) REFERENCES COLLEAGUE (COLLEAGUE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON RESERVEDNAME TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON RESERVEDNAME TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON RESERVEDNAME TO AUXILIARY;

/* GO Slim */
DROP TABLE GOSLIM CASCADE CONSTRAINTS;
CREATE TABLE GOSLIM (
GOSLIM_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
GO_ID INTEGER NOT NULL,
SLIM_NAME VARCHAR2(40) NOT NULL CHECK (SLIM_NAME IN ('Macromolecular complex terms', 'Yeast GO-Slim', 'Generic GO-Slim')),
GENOME_COUNT INTEGER NOT NULL,
DESCRIPTION VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT GOSLIM_PK PRIMARY KEY (GOSLIM_ID),
CONSTRAINT GOSLIM_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE INDEX GOSLIM_GO_FK_INDEX ON GOSLIM (GO_ID) TABLESPACE DATA02;
CREATE INDEX GOSLIM_SOURCE_FK_INDEX ON GOSLIM (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE GOSLIM
ADD CONSTRAINT GOSLIM_GO_FK FOREIGN KEY (GO_ID) REFERENCES GO (GO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GOSLIM
ADD CONSTRAINT GOSLIM_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON GOSLIM TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON GOSLIM TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON GOSLIM TO AUXILIARY;

/* Phenotype */

DROP TABLE PHENOTYPE CASCADE CONSTRAINTS;
CREATE TABLE PHENOTYPE (
PHENOTYPE_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
OBSERVABLE_ID INTEGER NOT NULL,
QUALIFIER_ID INTEGER,
DESCRIPTION VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PHENOTYPE_PK PRIMARY KEY (PHENOTYPE_ID),
CONSTRAINT PHENOTYPE_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE INDEX PHENO_SOURCE_FK_INDEX ON PHENOTYPE (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX PHENO_OBSERVABLE_FK_INDEX ON PHENOTYPE (OBSERVABLE_ID) TABLESPACE DATA02;
CREATE INDEX PHENO_QUALIFIER_FK_INDEX ON PHENOTYPE (QUALIFIER_ID) TABLESPACE DATA02;
ALTER TABLE PHENOTYPE
ADD CONSTRAINT PHENO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHENOTYPE
ADD CONSTRAINT PHENO_OBSERVABLE_FK FOREIGN KEY (OBSERVABLE_ID) REFERENCES APO (APO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHENOTYPE
ADD CONSTRAINT PHENO_QUALIFIER_FK FOREIGN KEY (QUALIFIER_ID) REFERENCES APO (APO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PHENOTYPE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PHENOTYPE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PHENOTYPE TO AUXILIARY;

DROP TABLE ALLELE CASCADE CONSTRAINTS;
CREATE TABLE ALLELE (
ALLELE_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
DESCRIPTION VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT ALLELE_PK PRIMARY KEY (ALLELE_ID),
CONSTRAINT ALLELE_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE INDEX ALLELE_SOURCE_FK_INDEX ON ALLELE (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE ALLELE
ADD CONSTRAINT ALLELE_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON ALLELE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ALLELE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ALLELE TO AUXILIARY;

DROP TABLE REPORTER CASCADE CONSTRAINTS;
CREATE TABLE REPORTER (
REPORTER_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
DESCRIPTION VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REPORTER_PK PRIMARY KEY (REPORTER_ID),
CONSTRAINT REPORTER_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE INDEX REPORTER_SOURCE_FK_INDEX ON REPORTER (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE REPORTER
ADD CONSTRAINT REPORTER_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON REPORTER TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REPORTER TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REPORTER TO AUXILIARY;

/* Expression */

DROP TABLE DATASET CASCADE CONSTRAINTS;
CREATE TABLE DATASET (
DATASET_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
DBXREF_ID VARCHAR2(40),
DBXREF_TYPE VARCHAR2(40) CHECK (DBXREF_TYPE IN ('GEO', 'ArrayExpress', 'SRA')),
ASSAY_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER,
CHANNEL_COUNT INTEGER NOT NULL,
SAMPLE_COUNT INTEGER NOT NULL,
IS_IN_SPELL NUMBER(1) NOT NULL,
IS_IN_BROWSER NUMBER(1) NOT NULL,
DESCRIPTION VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT DATASET_PK PRIMARY KEY (DATASET_ID),
CONSTRAINT DATASET_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE INDEX DATASET_SOURCE_FK_INDEX ON DATASET (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX DATASET_ASSAY_FK_INDEX ON DATASET (ASSAY_ID) TABLESPACE DATA02;
CREATE INDEX DATASET_TAX_FK_INDEX ON DATASET (TAXONOMY_ID) TABLESPACE DATA02;
ALTER TABLE DATASET
ADD CONSTRAINT DATASET_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DATASET
ADD CONSTRAINT DATASET_ASSAY_FK FOREIGN KEY (ASSAY_ID) REFERENCES OBI (OBI_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DATASET
ADD CONSTRAINT DATASET_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON DATASET TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASET TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASET TO AUXILIARY;

DROP TABLE DATASETLAB CASCADE CONSTRAINTS;
CREATE TABLE DATASETLAB (
DATASETLAB_ID INTEGER NOT NULL,
DATASET_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
LAB_NAME VARCHAR2(40) NOT NULL,
LAB_LOCATION VARCHAR2(100) NOT NULL,
COLLEAGUE_ID INTEGER,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT DATASETLAB_PK PRIMARY KEY (DATASETLAB_ID),
CONSTRAINT DATASETLAB_UK UNIQUE (LAB_NAME, DATASET_ID)) TABLESPACE DATA02;
CREATE INDEX DATASETLAB_DATASET_FK_INDEX ON DATASETLAB (DATASET_ID) TABLESPACE DATA02;
CREATE INDEX DATASETLAB_COLL_FK_INDEX ON DATASETLAB (COLLEAGUE_ID) TABLESPACE DATA02;
ALTER TABLE DATASETLAB
ADD CONSTRAINT DATASETLAB_COLL_FK FOREIGN KEY (COLLEAGUE_ID) REFERENCES COLLEAGUE (COLLEAGUE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DATASETLAB
ADD CONSTRAINT DATASETLAB_DATASET_FK FOREIGN KEY (DATASET_ID) REFERENCES DATASET (DATASET_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON DATASETLAB TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASETLAB TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASETLAB TO AUXILIARY;

DROP TABLE DATASET_URL CASCADE CONSTRAINTS;
CREATE TABLE DATASET_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
DATASET_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('GEO', 'ArrayExpress', 'SRA', 'Trace Archive')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT DATASET_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT DATASET_URL_UK UNIQUE (DATASET_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX DATASET_URL_SOURCE_FK_INDEX ON DATASET_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE DATASET_URL
ADD CONSTRAINT DATASET_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DATASET_URL
ADD CONSTRAINT DATASET_URL_DATASET_FK FOREIGN KEY (DATASET_ID) REFERENCES DATASET (DATASET_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON DATASET_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASET_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASET_URL TO AUXILIARY;

DROP TABLE DATASET_KEYWORD CASCADE CONSTRAINTS;
CREATE TABLE DATASET_KEYWORD (
DATASET_KEYWORD_ID INTEGER NOT NULL,
KEYWORD_ID INTEGER NOT NULL,
DATASET_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT DATASET_KEYWORD_PK PRIMARY KEY (DATASET_KEYWORD_ID),
CONSTRAINT DATASET_KEYWORD_UK UNIQUE (KEYWORD_ID, DATASET_ID)) TABLESPACE DATA02;
CREATE INDEX DATASET_KEY_SOURCE_FK_INDEX ON DATASET_KEYWORD (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX DATASET_KEY_DATASET_FK_INDEX ON DATASET_KEYWORD (DATASET_ID) TABLESPACE DATA02;
ALTER TABLE DATASET_KEYWORD
ADD CONSTRAINT DATASET_KEY_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DATASET_KEYWORD
ADD CONSTRAINT DATASET_KEY_KEY_FK FOREIGN KEY (KEYWORD_ID) REFERENCES KEYWORD (KEYWORD_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DATASET_KEYWORD
ADD CONSTRAINT DATASET_KEY_DATASET_FK FOREIGN KEY (DATASET_ID) REFERENCES DATASET (DATASET_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON DATASET_KEYWORD TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASET_KEYWORD TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASET_KEYWORD TO AUXILIARY;

DROP TABLE DATASET_REFERENCE CASCADE CONSTRAINTS;
CREATE TABLE DATASET_REFERENCE (
DATASET_REFERENCE_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
DATASET_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT DATASET_REFERENCE_PK PRIMARY KEY (DATASET_REFERENCE_ID),
CONSTRAINT DATASET_REFERENCE_UK UNIQUE (REFERENCE_ID, DATASET_ID)) TABLESPACE DATA02;
CREATE INDEX DATASET_REF_SOURCE_FK_INDEX ON DATASET_REFERENCE (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX DATASET_REF_DATASET_FK_INDEX ON DATASET_REFERENCE (DATASET_ID) TABLESPACE DATA02;
ALTER TABLE DATASET_REFERENCE
ADD CONSTRAINT DATASET_REF_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DATASET_REFERENCE
ADD CONSTRAINT DATASET_REF_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DATASET_REFERENCE
ADD CONSTRAINT DATASET_REF_DATASET_FK FOREIGN KEY (DATASET_ID) REFERENCES DATASET (DATASET_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON DATASET_REFERENCE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASET_REFERENCE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASET_REFERENCE TO AUXILIARY;

DROP TABLE DATASET_FILE CASCADE CONSTRAINTS;
CREATE TABLE DATASET_FILE (
DATASET_FILE_ID INTEGER NOT NULL,
DATASET_ID INTEGER NOT NULL,
FILE_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT DATASET_FILE_PK PRIMARY KEY (DATASET_FILE_ID),
CONSTRAINT DATASET_FILE_UK UNIQUE (DATASET_ID, FILE_ID)) TABLESPACE DATA02;
CREATE INDEX DATASET_FILE_SOURCE_FK_INDEX ON DATASET_FILE (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX DATASET_FILE_FILE_FK_INDEX ON DATASET_FILE (FILE_ID) TABLESPACE DATA02;
ALTER TABLE DATASET_FILE
ADD CONSTRAINT DATASET_FILE_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DATASET_FILE
ADD CONSTRAINT DATASET_FILE_FILE_FK FOREIGN KEY (FILE_ID) REFERENCES FILEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DATASET_FILE
ADD CONSTRAINT DATASET_FILE_DATASET_FK FOREIGN KEY (DATASET_ID) REFERENCES DATASET (DATASET_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON DATASET_FILE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASET_FILE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASET_FILE TO AUXILIARY;

DROP TABLE DATASETSAMPLE CASCADE CONSTRAINTS;
CREATE TABLE DATASETSAMPLE (
DATASETSAMPLE_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
DATASET_ID INTEGER NOT NULL,
SAMPLE_ORDER INTEGER NOT NULL,
DBXREF_ID VARCHAR2(40),
DBXREF_TYPE VARCHAR2(40) CHECK (DBXREF_TYPE IN ('GEO', 'ArrayExpress', 'SRA')),
BIOSAMPLE VARCHAR2(500),
STRAIN_NAME VARCHAR2(500),
DESCRIPTION VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT DATASETSAMPLE_PK PRIMARY KEY (DATASETSAMPLE_ID),
CONSTRAINT DATASETSAMPLE_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE INDEX DSETSAMP_SOURCE_FK_INDEX ON DATASETSAMPLE (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX DSETSAMP_DATASET_FK_INDEX ON DATASETSAMPLE (DATASET_ID) TABLESPACE DATA02;
ALTER TABLE DATASETSAMPLE
ADD CONSTRAINT DSETSAMP_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DATASETSAMPLE
ADD CONSTRAINT DSETSAMP_DATASET_FK FOREIGN KEY (DATASET_ID) REFERENCES DATASET (DATASET_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON DATASETSAMPLE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASETSAMPLE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DATASETSAMPLE TO AUXILIARY;

/* Sequence objects - Genome Release, Contig, Protein Domain */

DROP TABLE GENOMERELEASE CASCADE CONSTRAINTS;
CREATE TABLE GENOMERELEASE (
GENOMERELEASE_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
FILE_ID INTEGER,
SEQUENCE_RELEASE NUMBER(4) NOT NULL,
ANNOTATION_RELEASE NUMBER(4) NOT NULL,
CURATION_RELEASE NUMBER(4) NOT NULL,
RELEASE_DATE DATE NOT NULL,
DESCRIPTION VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT GENOMERELEASE_PK PRIMARY KEY (GENOMERELEASE_ID),
CONSTRAINT GENOMERELEASE_UK UNIQUE (FORMAT_NAME) ) TABLESPACE DATA02;
CREATE INDEX GENREL_FILE_FK_INDEX ON GENOMERELEASE (FILE_ID) TABLESPACE DATA02;
CREATE INDEX GENREL_SOURCE_FK_INDEX ON GENOMERELEASE (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE GENOMERELEASE
ADD CONSTRAINT GENREL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GENOMERELEASE
ADD CONSTRAINT GENREL_FILE_FK FOREIGN KEY (FILE_ID) REFERENCES FILEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON GENOMERELEASE TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON GENOMERELEASE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON GENOMERELEASE TO AUXILIARY;

DROP TABLE CONTIG CASCADE CONSTRAINTS;
CREATE TABLE CONTIG (
CONTIG_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
BUD_ID INTEGER,
SO_ID INTEGER NOT NULL,
CENTROMERE_START INTEGER,
CENTROMERE_END INTEGER,
GENBANK_ACCESSION VARCHAR2(40) NOT NULL,
GI_NUMBER VARCHAR2(40),
REFSEQ_ID VARCHAR2(40),
REFERENCE_CHROMOSOME_ID INTEGER,
REFERENCE_START INTEGER,
REFERENCE_END INTEGER,
REFERENCE_PERCENT_IDENTITY DECIMAL(7, 3),
REFERENCE_ALIGNMENT_LENGTH INTEGER,
SEQ_VERSION DATE,
COORD_VERSION DATE,
GENOMERELEASE_ID INTEGER,
FILE_HEADER VARCHAR2(200) NOT NULL,
DOWNLOAD_FILENAME VARCHAR2(100) NOT NULL,
FILE_ID INTEGER,
RESIDUES CLOB NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT CONTIG_PK PRIMARY KEY (CONTIG_ID),
CONSTRAINT CONTIG_UK UNIQUE (FORMAT_NAME) ) TABLESPACE DATA02
LOB (RESIDUES) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX CONTIG_SOURCE_FK_INDEX ON CONTIG (SOURCE_ID) TABLESPACE DATA02;
CREATE INDEX CONTIG_TAX_FK_INDEX ON CONTIG (TAXONOMY_ID) TABLESPACE DATA02;
CREATE INDEX CONTIG_SO_FK_INDEX ON CONTIG (SO_ID) TABLESPACE DATA02;
CREATE INDEX CONTIG_FILE_FK_INDEX ON CONTIG (FILE_ID) TABLESPACE DATA02;
CREATE INDEX CONTIG_GENREL_FK_INDEX ON CONTIG (GENOMERELEASE_ID) TABLESPACE DATA02;
ALTER TABLE CONTIG
ADD CONSTRAINT CONTIG_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CONTIG
ADD CONSTRAINT CONTIG_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CONTIG
ADD CONSTRAINT CONTIG_SO_FK FOREIGN KEY (SO_ID) REFERENCES SO (SO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CONTIG
ADD CONSTRAINT CONTIG_GENREL_FK FOREIGN KEY (GENOMERELEASE_ID) REFERENCES GENOMERELEASE (GENOMERELEASE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CONTIG
ADD CONSTRAINT CONTIG_FILE_FK FOREIGN KEY (FILE_ID) REFERENCES FILEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON CONTIG TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON CONTIG TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON CONTIG TO AUXILIARY;

DROP TABLE CONTIG_URL CASCADE CONSTRAINTS;
CREATE TABLE CONTIG_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
CONTIG_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('GenBank')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT CONTIG_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT CONTIG_URL_UK UNIQUE (CONTIG_ID, DISPLAY_NAME, OBJ_URL) ) TABLESPACE DATA02;
CREATE INDEX CONTIG_URL_SOURCE_FK_INDEX ON CONTIG_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE CONTIG_URL
ADD CONSTRAINT CONTIG_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CONTIG_URL
ADD CONSTRAINT CONTIG_URL_CONTIG_FK FOREIGN KEY (CONTIG_ID) REFERENCES CONTIG (CONTIG_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON CONTIG_URL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON CONTIG_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON CONTIG_URL TO AUXILIARY;

DROP TABLE PROTEINDOMAIN CASCADE CONSTRAINTS;
CREATE TABLE PROTEINDOMAIN (
PROTEINDOMAIN_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
INTERPRO_ID VARCHAR2(20),
DESCRIPTION VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PROTEINDOMAIN_PK PRIMARY KEY (PROTEINDOMAIN_ID),
CONSTRAINT PROTEINDOMAIN_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA02;
CREATE INDEX PROTDOM_SOURCE_FK_INDEX ON PROTEINDOMAIN (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE PROTEINDOMAIN
ADD CONSTRAINT PROTDOM_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PROTEINDOMAIN TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINDOMAIN TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINDOMAIN TO AUXILIARY;

DROP TABLE PROTEINDOMAIN_URL CASCADE CONSTRAINTS;
CREATE TABLE PROTEINDOMAIN_URL (
URL_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PROTEINDOMAIN_ID INTEGER NOT NULL,
URL_TYPE VARCHAR2(40) NOT NULL CHECK (URL_TYPE IN ('InterPro','PROSITE','HAMAP','Pfam','PRINTS','ProDom','SMART','TIGRFAM','PIRSF','SUPERFAMILY','GENE3D','PANTHER', 'JASPAR')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PROTEINDOMAIN_URL_PK PRIMARY KEY (URL_ID),
CONSTRAINT PROTEINDOMAIN_URL_UK UNIQUE (PROTEINDOMAIN_ID, DISPLAY_NAME, URL_TYPE) ) TABLESPACE DATA02;
CREATE INDEX PROTDOM_URL_SOURCE_FK_INDEX ON PROTEINDOMAIN_URL (SOURCE_ID) TABLESPACE DATA02;
ALTER TABLE PROTEINDOMAIN_URL
ADD CONSTRAINT PROTDOM_URL_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINDOMAIN_URL
ADD CONSTRAINT PROTDOM_URL_PROTDOM_FK FOREIGN KEY (PROTEINDOMAIN_ID) REFERENCES PROTEINDOMAIN (PROTEINDOMAIN_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PROTEINDOMAIN_URL TO DBSELECT;
GRANT INSERT, SELECT, UPDATE ON PROTEINDOMAIN_URL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINDOMAIN_URL TO AUXILIARY;

/* ANNOTATION */

DROP TABLE BINDINGMOTIFANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE BINDINGMOTIFANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
BUD_ID INTEGER,
OBJ_URL VARCHAR2(500) NOT NULL,
MOTIF_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT BINDINGMOTIFANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT BINDINGMOTIFANNOTATION_UK UNIQUE (DBENTITY_ID, MOTIF_ID) ) TABLESPACE DATA03;
CREATE INDEX BINDMOTIFANNO_REF_FK_INDEX ON BINDINGMOTIFANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX BINDMOTIFANNO_TAX_FK_INDEX ON BINDINGMOTIFANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX BINDMOTIFANNO_SOURCE_FK_INDEX ON BINDINGMOTIFANNOTATION (SOURCE_ID) TABLESPACE DATA03;
ALTER TABLE BINDINGMOTIFANNOTATION
ADD CONSTRAINT BINDMOTIFANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE BINDINGMOTIFANNOTATION
ADD CONSTRAINT BINDMOTIFANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE BINDINGMOTIFANNOTATION
ADD CONSTRAINT BINDMOTIFANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE BINDINGMOTIFANNOTATION
ADD CONSTRAINT BINDMOTIFANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON BINDINGMOTIFANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON BINDINGMOTIFANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON BINDINGMOTIFANNOTATION TO AUXILIARY;

DROP TABLE CONTIGNOTEANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE CONTIGNOTEANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
CONTIG_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
BUD_ID INTEGER,
NOTE_TYPE VARCHAR2(40) NOT NULL CHECK (NOTE_TYPE IN ('Chromosome')),
DISPLAY_NAME VARCHAR2(500) NOT NULL,
NOTE VARCHAR2(2000) NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT CONTIGNOTEANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT CONTIGNOTEANNOTATION_UK UNIQUE (CONTIG_ID, NOTE_TYPE, DISPLAY_NAME, NOTE) ) TABLESPACE DATA03;
CREATE INDEX CONTIGNOTEANNO_REF_FK_INDEX ON CONTIGNOTEANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX CONTIGNOTEANNO_TAX_FK_INDEX ON CONTIGNOTEANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX CONTIGNOTEANNO_SOURCE_FK_INDEX ON CONTIGNOTEANNOTATION (SOURCE_ID) TABLESPACE DATA03;
ALTER TABLE CONTIGNOTEANNOTATION
ADD CONSTRAINT CONTIGNOTEANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CONTIGNOTEANNOTATION
ADD CONSTRAINT CONTIGNOTEANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CONTIGNOTEANNOTATION
ADD CONSTRAINT CONTIGNOTEANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CONTIGNOTEANNOTATION
ADD CONSTRAINT CONTIGNOTEANNO_CONTIG_FK FOREIGN KEY (CONTIG_ID) REFERENCES CONTIG (CONTIG_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON CONTIGNOTEANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON CONTIGNOTEANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON CONTIGNOTEANNOTATION TO AUXILIARY;

DROP TABLE DNASEQUENCEANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE DNASEQUENCEANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
BUD_ID INTEGER,
SO_ID INTEGER NOT NULL,
DNA_TYPE VARCHAR2(50) NOT NULL CHECK (DNA_TYPE IN ('CODING', '1KB', 'GENOMIC')),
CONTIG_ID INTEGER NOT NULL,
SEQ_VERSION DATE,
COORD_VERSION DATE,
GENOMERELEASE_ID INTEGER,
START_INDEX INTEGER NOT NULL,
END_INDEX INTEGER NOT NULL,
STRAND VARCHAR2(1) NOT NULL CHECK (STRAND IN ('+', '-', '0')),
FILE_HEADER VARCHAR2(200) NOT NULL,
DOWNLOAD_FILENAME VARCHAR2(100) NOT NULL,
FILE_ID INTEGER,
RESIDUES CLOB NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT DNASEQUENCEANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT DNASEQUENCEANNOTATION_UK UNIQUE (DBENTITY_ID, TAXONOMY_ID, CONTIG_ID, SO_ID, DNA_TYPE) ) TABLESPACE DATA03
LOB (RESIDUES) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX DNASEQANNO_REF_FK_INDEX ON DNASEQUENCEANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX DNASEQANNO_TAX_FK_INDEX ON DNASEQUENCEANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX DNASEQANNO_SOURCE_FK_INDEX ON DNASEQUENCEANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX DNASEQANNO_CONTIG_FK_INDEX ON DNASEQUENCEANNOTATION (CONTIG_ID) TABLESPACE DATA03;
CREATE INDEX DNASEQANNO_SO_FK_INDEX ON DNASEQUENCEANNOTATION (SO_ID) TABLESPACE DATA03;
CREATE INDEX DNASEQANNO_GENREL_FK_INDEX ON DNASEQUENCEANNOTATION (GENOMERELEASE_ID) TABLESPACE DATA03;
CREATE INDEX DNASEQANNO_FILE_FK_INDEX ON DNASEQUENCEANNOTATION (FILE_ID) TABLESPACE DATA03;
ALTER TABLE DNASEQUENCEANNOTATION
ADD CONSTRAINT DNASEQANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DNASEQUENCEANNOTATION
ADD CONSTRAINT DNASEQANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DNASEQUENCEANNOTATION
ADD CONSTRAINT DNASEQANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DNASEQUENCEANNOTATION
ADD CONSTRAINT DNASEQANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DNASEQUENCEANNOTATION
ADD CONSTRAINT DNASEQANNO_CONTIG_FK FOREIGN KEY (CONTIG_ID) REFERENCES CONTIG (CONTIG_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DNASEQUENCEANNOTATION
ADD CONSTRAINT DNASEQANNO_SO_FK FOREIGN KEY (SO_ID) REFERENCES SO (SO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DNASEQUENCEANNOTATION
ADD CONSTRAINT DNASEQANNO_GENREL_FK FOREIGN KEY (GENOMERELEASE_ID) REFERENCES GENOMERELEASE (GENOMERELEASE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DNASEQUENCEANNOTATION
ADD CONSTRAINT DNASEQANNO_FILE_FK FOREIGN KEY (FILE_ID) REFERENCES FILEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON DNASEQUENCEANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON DNASEQUENCEANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DNASEQUENCEANNOTATION TO AUXILIARY;

DROP TABLE DNASUBSEQUENCE CASCADE CONSTRAINTS;
CREATE TABLE DNASUBSEQUENCE (
DNASUBSEQUENCE_ID INTEGER NOT NULL,
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
BUD_ID INTEGER,
SO_ID INTEGER NOT NULL,
RELATIVE_START_INDEX INTEGER NOT NULL,
RELATIVE_END_INDEX INTEGER NOT NULL,
CONTIG_START_INDEX INTEGER NOT NULL,
CONTIG_END_INDEX INTEGER NOT NULL,
SEQ_VERSION DATE,
COORD_VERSION DATE,
GENOMERELEASE_ID INTEGER,
FILE_HEADER VARCHAR2(200) NOT NULL,
DOWNLOAD_FILENAME VARCHAR2(100) NOT NULL,
FILE_ID INTEGER,
RESIDUES CLOB NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT DNASUBSEQUENCE_PK PRIMARY KEY (DNASUBSEQUENCE_ID),
CONSTRAINT DNASUBSEQUENCE_UK UNIQUE (ANNOTATION_ID, DBENTITY_ID, RELATIVE_START_INDEX, RELATIVE_END_INDEX)) TABLESPACE DATA03
LOB (RESIDUES) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX DNASUBSEQ_DBENT_FK_INDEX ON DNASUBSEQUENCE (DBENTITY_ID) TABLESPACE DATA03;
CREATE INDEX DNASUBSEQ_SO_FK_INDEX ON DNASUBSEQUENCE (SO_ID) TABLESPACE DATA03;
CREATE INDEX DNASUBSEQ_GENREL_FK_INDEX ON DNASUBSEQUENCE (GENOMERELEASE_ID) TABLESPACE DATA03;
CREATE INDEX DNASUBSEQ_FILE_FK_INDEX ON DNASUBSEQUENCE (FILE_ID) TABLESPACE DATA03;
ALTER TABLE DNASUBSEQUENCE
ADD CONSTRAINT DNASUBSEQ_ANNO_FK FOREIGN KEY (ANNOTATION_ID) REFERENCES DNASEQUENCEANNOTATION (ANNOTATION_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DNASUBSEQUENCE
ADD CONSTRAINT DNASUBSEQ_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DNASUBSEQUENCE
ADD CONSTRAINT DNASUBSEQ_SO_FK FOREIGN KEY (SO_ID) REFERENCES SO (SO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DNASUBSEQUENCE
ADD CONSTRAINT DNASUBSEQ_GENREL_FK FOREIGN KEY (GENOMERELEASE_ID) REFERENCES GENOMERELEASE (GENOMERELEASE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE DNASUBSEQUENCE
ADD CONSTRAINT DNASUBSEQ_FILE_FK FOREIGN KEY (FILE_ID) REFERENCES FILEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON DNASUBSEQUENCE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON DNASUBSEQUENCE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON DNASUBSEQUENCE TO AUXILIARY;

DROP TABLE ENZYMEANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE ENZYMEANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
BUD_ID INTEGER,
EC_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT ENZYMEANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT ENZYMEANNOTATION_UK UNIQUE (DBENTITY_ID, EC_ID) ) TABLESPACE DATA03;
CREATE INDEX ENZANNO_REF_FK_INDEX ON ENZYMEANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX ENZANNO_TAX_FK_INDEX ON ENZYMEANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX ENZANNO_SOURCE_FK_INDEX ON ENZYMEANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX ENZANNO_EC_FK_INDEX ON ENZYMEANNOTATION (EC_ID) TABLESPACE DATA03;
ALTER TABLE ENZYMEANNOTATION
ADD CONSTRAINT ENZANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE ENZYMEANNOTATION
ADD CONSTRAINT ENZANNO_ORGANISM_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE ENZYMEANNOTATION
ADD CONSTRAINT ENZANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE ENZYMEANNOTATION
ADD CONSTRAINT ENZANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE ENZYMEANNOTATION
ADD CONSTRAINT ENZANNO_EC_FK FOREIGN KEY (EC_ID) REFERENCES EC (EC_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON ENZYMEANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ENZYMEANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ENZYMEANNOTATION TO AUXILIARY;

DROP TABLE EXPRESSIONANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE EXPRESSIONANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
BUD_ID INTEGER,
DATASETSAMPLE_ID INTEGER NOT NULL,
EXPRESSION_VALUE DECIMAL(7, 3) NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT EXPRESSIONANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT EXPRESSIONANNOTATION_UK UNIQUE (DATASETSAMPLE_ID, DBENTITY_ID)) TABLESPACE DATA03;
CREATE INDEX EXPRESSANNO_REF_FK_INDEX ON EXPRESSIONANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX EXPRESSANNO_TAX_FK_INDEX ON EXPRESSIONANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX EXPRESSANNO_SOURCE_FK_INDEX ON EXPRESSIONANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX EXPRESSANNO_DBENT_FK_INDEX ON EXPRESSIONANNOTATION (DBENTITY_ID) TABLESPACE DATA03;
ALTER TABLE EXPRESSIONANNOTATION
ADD CONSTRAINT EXPRESSANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE EXPRESSIONANNOTATION
ADD CONSTRAINT EXPRESSANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE EXPRESSIONANNOTATION
ADD CONSTRAINT EXPRESSANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE EXPRESSIONANNOTATION
ADD CONSTRAINT EXPRESSANNO_DSETSAMP_FK FOREIGN KEY (DATASETSAMPLE_ID) REFERENCES DATASETSAMPLE (DATASETSAMPLE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE EXPRESSIONANNOTATION
ADD CONSTRAINT EXPRESSANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON EXPRESSIONANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON EXPRESSIONANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON EXPRESSIONANNOTATION TO AUXILIARY;

DROP TABLE GENINTERACTIONANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE GENINTERACTIONANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY1_ID INTEGER NOT NULL,
DBENTITY2_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PHENOTYPE_ID INTEGER,
BIOGRID_EXPERIMENTAL_SYSTEM VARCHAR2(100) NOT NULL,
ANNOTATION_TYPE VARCHAR2(20) NOT NULL CHECK (ANNOTATION_TYPE IN ('high-throughput', 'manually curated')),
BAIT_HIT VARCHAR2(10) NOT NULL CHECK (BAIT_HIT IN ('Bait-Hit', 'Hit-Bait')),
DESCRIPTION VARCHAR2(1000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT GENINTERACTIONANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT GENINTERACTIONANNOTATION_UK UNIQUE (DBENTITY1_ID, DBENTITY2_ID, BAIT_HIT, BIOGRID_EXPERIMENTAL_SYSTEM, REFERENCE_ID)) TABLESPACE DATA03;
CREATE INDEX GENINTANNO_REF_FK_INDEX ON GENINTERACTIONANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX GENINTANNO_TAX_FK_INDEX ON GENINTERACTIONANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX GENINTANNO_SOURCE_FK_INDEX ON GENINTERACTIONANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX GENINTANNO_DBENTITY2_INDEX ON GENINTERACTIONANNOTATION (DBENTITY2_ID) TABLESPACE DATA03;
CREATE INDEX GENINTANNO_PHENO_FK_INDEX ON GENINTERACTIONANNOTATION (PHENOTYPE_ID) TABLESPACE DATA03;
ALTER TABLE GENINTERACTIONANNOTATION
ADD CONSTRAINT GENINTANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GENINTERACTIONANNOTATION
ADD CONSTRAINT GENINTANNO_ORGANISM_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GENINTERACTIONANNOTATION
ADD CONSTRAINT GENINTANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GENINTERACTIONANNOTATION
ADD CONSTRAINT GENINTANNO_PHENO_FK FOREIGN KEY (PHENOTYPE_ID) REFERENCES PHENOTYPE (PHENOTYPE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GENINTERACTIONANNOTATION
ADD CONSTRAINT GENINTANNO_DBENTITY1_FK FOREIGN KEY (DBENTITY1_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GENINTERACTIONANNOTATION
ADD CONSTRAINT GENINTANNO_DBENTITY2_FK FOREIGN KEY (DBENTITY2_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON GENINTERACTIONANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON GENINTERACTIONANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON GENINTERACTIONANNOTATION TO AUXILIARY;

DROP TABLE GOANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE GOANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
GO_ID INTEGER NOT NULL,
ECO_ID INTEGER NOT NULL,
ANNOTATION_TYPE VARCHAR2(40) NOT NULL CHECK (ANNOTATION_TYPE IN ('high-throughput', 'manually curated', 'computational')),
GO_QUALIFIER VARCHAR2(40) NOT NULL CHECK (GO_QUALIFIER IN ('enables', 'involved in', 'part of', 'NOT', 'colocalizes_with', 'contributes_to')),
DATE_ASSIGNED DATE NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT GOANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT GOANNOTATION_UK UNIQUE (DBENTITY_ID, GO_ID, ECO_ID, REFERENCE_ID, ANNOTATION_TYPE, GO_QUALIFIER, SOURCE_ID)) TABLESPACE DATA03;
CREATE INDEX GOANNO_REF_FK_INDEX ON GOANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX GOANNO_TAX_FK_INDEX ON GOANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX GOANNO_ECO_FK_INDEX ON GOANNOTATION (ECO_ID) TABLESPACE DATA03;
CREATE INDEX GOANNO_SOURCE_FK_INDEX ON GOANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX GOANNO_GO_FK_INDEX ON GOANNOTATION	(GO_ID) TABLESPACE DATA03;
ALTER TABLE GOANNOTATION
ADD CONSTRAINT GOANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GOANNOTATION
ADD CONSTRAINT GOANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GOANNOTATION
ADD CONSTRAINT GOANNO_ECO_FK FOREIGN KEY (ECO_ID) REFERENCES ECO (ECO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GOANNOTATION
ADD CONSTRAINT GOANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GOANNOTATION
ADD CONSTRAINT GOANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GOANNOTATION
ADD CONSTRAINT GOANNO_GO_FK FOREIGN KEY (GO_ID) REFERENCES GO (GO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON GOANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON GOANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON GOANNOTATION TO AUXILIARY;

DROP TABLE GOSUPPORTINGEVIDENCE CASCADE CONSTRAINTS;
CREATE TABLE GOSUPPORTINGEVIDENCE (
GOSUPPORTINGEVIDENCE_ID INTEGER NOT NULL,
ANNOTATION_ID INTEGER NOT NULL,
GROUP_ID INTEGER NOT NULL,
DBXREF_ID VARCHAR2(40) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
EVIDENCE_TYPE VARCHAR2(10) NOT NULL CHECK (EVIDENCE_TYPE IN ('with', 'from')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT GOSUPPORTINGEVIDENCE_PK PRIMARY KEY (GOSUPPORTINGEVIDENCE_ID),
CONSTRAINT GOSUPPORTINGEVIDENCE_UK UNIQUE (ANNOTATION_ID, DBXREF_ID, GROUP_ID, EVIDENCE_TYPE)) TABLESPACE DATA03;
ALTER TABLE GOSUPPORTINGEVIDENCE
ADD CONSTRAINT GOSUPEVID_ANNO_FK FOREIGN KEY (ANNOTATION_ID) REFERENCES GOANNOTATION (ANNOTATION_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON GOSUPPORTINGEVIDENCE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON GOSUPPORTINGEVIDENCE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON GOSUPPORTINGEVIDENCE TO AUXILIARY;

DROP TABLE GOEXTENSION CASCADE CONSTRAINTS;
CREATE TABLE GOEXTENSION (
GOEXTENSION_ID INTEGER NOT NULL,
ANNOTATION_ID INTEGER NOT NULL,
GROUP_ID INTEGER NOT NULL,
DBXREF_ID VARCHAR2(40) NOT NULL,
OBJ_URL VARCHAR2(500) NOT NULL,
RO_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT GOEXTENSION_PK PRIMARY KEY (GOEXTENSION_ID),
CONSTRAINT GOEXTENSION_UK UNIQUE (ANNOTATION_ID, DBXREF_ID, GROUP_ID, RO_ID)) TABLESPACE DATA03;
CREATE INDEX GOEXT_RO_FK_INDEX ON GOEXTENSION (RO_ID) TABLESPACE DATA03;
ALTER TABLE GOEXTENSION
ADD CONSTRAINT GOEXT_ANNO_FK FOREIGN KEY (ANNOTATION_ID) REFERENCES GOANNOTATION (ANNOTATION_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GOEXTENSION
ADD CONSTRAINT GOEXT_RO_FK FOREIGN KEY (RO_ID) REFERENCES RO (RO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON GOEXTENSION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON GOEXTENSION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON GOEXTENSION TO AUXILIARY;

DROP TABLE GOSLIMANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE GOSLIMANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
GOSLIM_ID INTEGER NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT GOSLIMANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT GOSLIMANNOTATION_UK UNIQUE (DBENTITY_ID, GOSLIM_ID)) TABLESPACE DATA03;
CREATE INDEX GOSLIMANNO_REF_FK_INDEX ON GOSLIMANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX GOSLIMANNO_TAX_FK_INDEX ON GOSLIMANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX GOSLIMANNO_SOURCE_FK_INDEX ON GOSLIMANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX GOSLIMANNO_GOSLIM_FK_INDEX ON GOSLIMANNOTATION	(GOSLIM_ID) TABLESPACE DATA03;
ALTER TABLE GOSLIMANNOTATION
ADD CONSTRAINT GOSLIMANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GOSLIMANNOTATION
ADD CONSTRAINT GOSLIMANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GOSLIMANNOTATION
ADD CONSTRAINT GOSLIMANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GOSLIMANNOTATION
ADD CONSTRAINT GOSLIMANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE GOSLIMANNOTATION
ADD CONSTRAINT GOSLIMANNO_GOSLIM_FK FOREIGN KEY (GOSLIM_ID) REFERENCES GOSLIM (GOSLIM_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON GOSLIMANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON GOSLIMANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON GOSLIMANNOTATION TO AUXILIARY;

DROP TABLE LITERATUREANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE LITERATUREANNOTATION ( 
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
TOPIC VARCHAR2(42) NOT NULL CHECK (TOPIC IN ('Additional Literature', 'Omics', 'Primary Literature', 'Reviews')),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT LITERATUREANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT LITERATUREANNOTATION_UK UNIQUE (DBENTITY_ID, REFERENCE_ID, TOPIC) ) TABLESPACE DATA03;
CREATE INDEX LITANNO_REF_FK_INDEX ON LITERATUREANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX LITANNO_TAX_FK_INDEX ON LITERATUREANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX LITANNO_SOURCE_FK_INDEX ON LITERATUREANNOTATION (SOURCE_ID) TABLESPACE DATA03;
ALTER TABLE LITERATUREANNOTATION
ADD CONSTRAINT LITANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LITERATUREANNOTATION
ADD CONSTRAINT LITANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LITERATUREANNOTATION
ADD CONSTRAINT LITANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LITERATUREANNOTATION 
ADD CONSTRAINT LITANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON LITERATUREANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON LITERATUREANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON LITERATUREANNOTATION TO AUXILIARY;

DROP TABLE LOCUSNOTEANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE LOCUSNOTEANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
BUD_ID INTEGER,
NOTE_TYPE VARCHAR2(40) NOT NULL CHECK (NOTE_TYPE IN ('Locus', 'Sequence')),
DISPLAY_NAME VARCHAR2(500) NOT NULL,
NOTE VARCHAR2(2000) NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT LOCUSNOTEANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT LOCUSNOTEANNOTATION_UK UNIQUE (DBENTITY_ID, NOTE_TYPE, DISPLAY_NAME, NOTE) ) TABLESPACE DATA03;
CREATE INDEX LOCUSNOTEANNO_REF_FK_INDEX ON LOCUSNOTEANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX LOCUSNOTEANNO_TAX_FK_INDEX ON LOCUSNOTEANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX LOCUSNOTEANNO_SOURCE_FK_INDEX ON LOCUSNOTEANNOTATION (SOURCE_ID) TABLESPACE DATA03;
ALTER TABLE LOCUSNOTEANNOTATION
ADD CONSTRAINT LOCUSNOTEANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LOCUSNOTEANNOTATION
ADD CONSTRAINT LOCUSNOTEANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LOCUSNOTEANNOTATION
ADD CONSTRAINT LOCUSNOTEANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE LOCUSNOTEANNOTATION
ADD CONSTRAINT LOCUSNOTEANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON LOCUSNOTEANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUSNOTEANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON LOCUSNOTEANNOTATION TO AUXILIARY;

DROP TABLE PATHWAYANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE PATHWAYANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
BUD_ID INTEGER,
PATHWAY_ID INTEGER NOT NULL,
EC_ID INTEGER,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PATHWAYANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT PATHWAYANNOTATION_UK UNIQUE (DBENTITY_ID, PATHWAY_ID, REFERENCE_ID, EC_ID) ) TABLESPACE DATA03;
CREATE INDEX PATHANNO_REF_FK_INDEX ON PATHWAYANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX PATHANNO_TAX_FK_INDEX ON PATHWAYANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX PATHANNO_SOURCE_FK_INDEX ON PATHWAYANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX PATHANNO_PATH_FK_INDEX ON PATHWAYANNOTATION (PATHWAY_ID) TABLESPACE DATA03;
CREATE INDEX PATHANNO_EC_FK_INDEX ON PATHWAYANNOTATION (EC_ID) TABLESPACE DATA03;
ALTER TABLE PATHWAYANNOTATION
ADD CONSTRAINT PATHANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PATHWAYANNOTATION
ADD CONSTRAINT PATHANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PATHWAYANNOTATION
ADD CONSTRAINT PATHANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PATHWAYANNOTATION
ADD CONSTRAINT PATHANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PATHWAYANNOTATION
ADD CONSTRAINT PATHANNO_PATH_FK FOREIGN KEY (PATHWAY_ID) REFERENCES PATHWAYDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PATHWAYANNOTATION
ADD CONSTRAINT PATHANNO_EC_FK FOREIGN KEY (EC_ID) REFERENCES EC (EC_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PATHWAYANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PATHWAYANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PATHWAYANNOTATION TO AUXILIARY;

DROP TABLE PHENOTYPEANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE PHENOTYPEANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
PHENOTYPE_ID INTEGER NOT NULL,
EXPERIMENT_ID INTEGER NOT NULL,
MUTANT_ID INTEGER NOT NULL,
ALLELE_ID INTEGER,
REPORTER_ID INTEGER,
ASSAY_ID INTEGER,
STRAIN_NAME VARCHAR2(100),
DETAILS VARCHAR2(500),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PHENOTYPEANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT PHENOTYPEANNOTATION_UK UNIQUE (DBENTITY_ID,PHENOTYPE_ID,EXPERIMENT_ID,MUTANT_ID,REFERENCE_ID,TAXONOMY_ID) ) TABLESPACE DATA03;
CREATE INDEX PHENOANNO_SOURCE_FK_INDEX ON PHENOTYPEANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX PHENOANNO_TAXONOMY_FK_INDEX ON PHENOTYPEANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX PHENOANNO_REF_FK_INDEX ON PHENOTYPEANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX PHENOANNO_PHENO_FK_INDEX ON PHENOTYPEANNOTATION (PHENOTYPE_ID) TABLESPACE DATA03;
CREATE INDEX PHENOANNO_EXPT_FK_INDEX ON PHENOTYPEANNOTATION (EXPERIMENT_ID) TABLESPACE DATA03;
CREATE INDEX PHENOANNO_MUTANT_FK_INDEX ON PHENOTYPEANNOTATION (MUTANT_ID) TABLESPACE DATA03;
CREATE INDEX PHENOANNO_ALLELE_FK_INDEX ON PHENOTYPEANNOTATION (ALLELE_ID) TABLESPACE DATA03;
CREATE INDEX PHENOANNO_REPORTER_FK_INDEX ON PHENOTYPEANNOTATION (REPORTER_ID) TABLESPACE DATA03;
CREATE INDEX PHENOANNO_ASSAY_FK_INDEX ON PHENOTYPEANNOTATION (ASSAY_ID) TABLESPACE DATA03;
ALTER TABLE PHENOTYPEANNOTATION
ADD CONSTRAINT PHENOANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHENOTYPEANNOTATION
ADD CONSTRAINT PHENOANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHENOTYPEANNOTATION
ADD CONSTRAINT PHENOANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHENOTYPEANNOTATION
ADD CONSTRAINT PHENOANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHENOTYPEANNOTATION
ADD CONSTRAINT PHENOANNO_PHENO_FK FOREIGN KEY (PHENOTYPE_ID) REFERENCES PHENOTYPE (PHENOTYPE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHENOTYPEANNOTATION
ADD CONSTRAINT PHENOANNO_EXPT_FK FOREIGN KEY (EXPERIMENT_ID) REFERENCES APO (APO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHENOTYPEANNOTATION
ADD CONSTRAINT PHENOANNO_MUTANT_FK FOREIGN KEY (MUTANT_ID) REFERENCES APO (APO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHENOTYPEANNOTATION
ADD CONSTRAINT PHENOANNO_ALLELE_FK FOREIGN KEY (ALLELE_ID) REFERENCES ALLELE (ALLELE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHENOTYPEANNOTATION
ADD CONSTRAINT PHENOANNO_REPORTER_FK FOREIGN KEY (REPORTER_ID) REFERENCES REPORTER (REPORTER_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHENOTYPEANNOTATION
ADD CONSTRAINT PHENOANNO_ASSAY_FK FOREIGN KEY (ASSAY_ID) REFERENCES OBI (OBI_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PHENOTYPEANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PHENOTYPEANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PHENOTYPEANNOTATION TO AUXILIARY;

DROP TABLE PHENOTYPEANNOTATION_COND CASCADE CONSTRAINTS;
CREATE TABLE PHENOTYPEANNOTATION_COND (
CONDITION_ID INTEGER NOT NULL,
ANNOTATION_ID INTEGER NOT NULL,
CONDITION_CLASS VARCHAR2(40) NOT NULL CHECK (CONDITION_CLASS IN ('assay', 'media', 'phase', 'radiation', 'temperature', 'treatment')),
CONDITION_NAME VARCHAR2(500) NOT NULL,
CONDITION_VALUE VARCHAR2(100),
CONDITION_UNIT VARCHAR2(25),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PHENOTYPEANNOTATION_COND_PK PRIMARY KEY (CONDITION_ID),
CONSTRAINT PHENOTYPEANNOTATION_COND_UK UNIQUE (ANNOTATION_ID, CONDITION_CLASS, CONDITION_NAME, CONDITION_VALUE) ) TABLESPACE DATA03;
ALTER TABLE PHENOTYPEANNOTATION_COND
ADD CONSTRAINT PHENOANNOCOND_ANNO_FK FOREIGN KEY (ANNOTATION_ID) REFERENCES PHENOTYPEANNOTATION (ANNOTATION_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PHENOTYPEANNOTATION_COND TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PHENOTYPEANNOTATION_COND TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PHENOTYPEANNOTATION_COND TO AUXILIARY;

DROP TABLE PHYSINTERACTIONANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE PHYSINTERACTIONANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY1_ID INTEGER NOT NULL,
DBENTITY2_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
BUD_ID INTEGER,
PSIMOD_ID INTEGER,
BIOGRID_EXPERIMENTAL_SYSTEM VARCHAR2(100) NOT NULL,
ANNOTATION_TYPE VARCHAR2(20) NOT NULL CHECK (ANNOTATION_TYPE IN ('high-throughput', 'manually curated')),
BAIT_HIT VARCHAR2(10) NOT NULL CHECK (BAIT_HIT IN ('Bait-Hit', 'Hit-Bait')),
DESCRIPTION VARCHAR2(1000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PHYSINTERACTIONANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT PHYSINTERACTIONANNOTATION_UK UNIQUE (DBENTITY1_ID, DBENTITY2_ID, BAIT_HIT, BIOGRID_EXPERIMENTAL_SYSTEM, REFERENCE_ID)) TABLESPACE DATA03;
CREATE INDEX PHYSINTANNO_REF_FK_INDEX ON PHYSINTERACTIONANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX PHYSINTANNO_TAX_FK_INDEX ON PHYSINTERACTIONANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX PHYSINTANNO_PSIMOD_FK_INDEX ON PHYSINTERACTIONANNOTATION (PSIMOD_ID) TABLESPACE DATA03;
CREATE INDEX PHYSINTANNO_SOURCE_FK_INDEX ON PHYSINTERACTIONANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX PHYSINTANNO_DBENTITY2_INDEX ON PHYSINTERACTIONANNOTATION (DBENTITY2_ID) TABLESPACE DATA03;
ALTER TABLE PHYSINTERACTIONANNOTATION
ADD CONSTRAINT PHYSINTANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHYSINTERACTIONANNOTATION
ADD CONSTRAINT PHYSINTANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHYSINTERACTIONANNOTATION
ADD CONSTRAINT PHYSINTANNO_PSIMOD_FK FOREIGN KEY (PSIMOD_ID) REFERENCES PSIMOD (PSIMOD_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHYSINTERACTIONANNOTATION
ADD CONSTRAINT PHYSINTANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHYSINTERACTIONANNOTATION
ADD CONSTRAINT PHYSINTANNO_DBENTITY1_FK FOREIGN KEY (DBENTITY1_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PHYSINTERACTIONANNOTATION
ADD CONSTRAINT PHYSINTANNO_DBENTITY2_FK FOREIGN KEY (DBENTITY2_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PHYSINTERACTIONANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PHYSINTERACTIONANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PHYSINTERACTIONANNOTATION TO AUXILIARY;

DROP TABLE POSTTRANSLATIONANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE POSTTRANSLATIONANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
SITE_INDEX INTEGER NOT NULL,
SITE_RESIDUE VARCHAR2(1) NOT NULL,
PSIMOD_ID INTEGER NOT NULL,
MODIFIER_ID INTEGER,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT POSTTRANSLATIONANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT POSTTRANSLATIONANNOTATION_UK UNIQUE (DBENTITY_ID, PSIMOD_ID, SITE_RESIDUE, SITE_INDEX, REFERENCE_ID, MODIFIER_ID) ) TABLESPACE DATA03;
CREATE INDEX PTRANSANNO_REF_FK_INDEX ON POSTTRANSLATIONANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX PTRANSANNO_TAX_FK_INDEX ON POSTTRANSLATIONANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX PTRANSANNO_SOURCE_FK_INDEX ON POSTTRANSLATIONANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX PTRANSANNO_MOD_FK_INDEX ON POSTTRANSLATIONANNOTATION (MODIFIER_ID) TABLESPACE DATA03;
CREATE INDEX PTRANSANNO_PSIMOD_FK_INDEX ON POSTTRANSLATIONANNOTATION (PSIMOD_ID) TABLESPACE DATA03;
ALTER TABLE POSTTRANSLATIONANNOTATION
ADD CONSTRAINT PTRANSANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE POSTTRANSLATIONANNOTATION
ADD CONSTRAINT PTRANSANNO_ORGANISM_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE POSTTRANSLATIONANNOTATION
ADD CONSTRAINT PTRANSANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE POSTTRANSLATIONANNOTATION
ADD CONSTRAINT PTRANSANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE POSTTRANSLATIONANNOTATION
ADD CONSTRAINT PTRANSANNO_MOD_FK FOREIGN KEY (MODIFIER_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE POSTTRANSLATIONANNOTATION
ADD CONSTRAINT PTRANSANNO_PSIMOD_FK FOREIGN KEY (PSIMOD_ID) REFERENCES PSIMOD (PSIMOD_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON POSTTRANSLATIONANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON POSTTRANSLATIONANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON POSTTRANSLATIONANNOTATION TO AUXILIARY;

DROP TABLE PROTEINDOMAINANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE PROTEINDOMAINANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
BUD_ID INTEGER,
PROTEINDOMAIN_ID INTEGER NOT NULL,
START_INDEX INTEGER NOT NULL,
END_INDEX INTEGER NOT NULL,
DATE_OF_RUN DATE NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PROTEINDOMAINANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT PROTEINDOMAINANNOTATION_UK UNIQUE (DBENTITY_ID, PROTEINDOMAIN_ID, START_INDEX, END_INDEX) ) TABLESPACE DATA03;
CREATE INDEX PROTDOMANNO_REF_FK_INDEX ON PROTEINDOMAINANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX PROTDOMANNO_TAX_FK_INDEX ON PROTEINDOMAINANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX PROTDOMANNO_SOURCE_FK_INDEX ON PROTEINDOMAINANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX PROTDOMANNO_DOMAIN_FK_INDEX ON PROTEINDOMAINANNOTATION (PROTEINDOMAIN_ID) TABLESPACE DATA03;
ALTER TABLE PROTEINDOMAINANNOTATION
ADD CONSTRAINT PROTDOMANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINDOMAINANNOTATION
ADD CONSTRAINT PROTDOMANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINDOMAINANNOTATION
ADD CONSTRAINT PROTDOMANNO_ORGANISM_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINDOMAINANNOTATION
ADD CONSTRAINT PROTDOMANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINDOMAINANNOTATION
ADD CONSTRAINT PROTDOMANNO_DOMAIN_FK FOREIGN KEY (PROTEINDOMAIN_ID) REFERENCES PROTEINDOMAIN (PROTEINDOMAIN_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PROTEINDOMAINANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINDOMAINANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINDOMAINANNOTATION TO AUXILIARY;

DROP TABLE PROTEINEXPTANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE PROTEINEXPTANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
BUD_ID INTEGER,
EXPERIMENT_TYPE VARCHAR2(40) NOT NULL CHECK (EXPERIMENT_TYPE IN ('abundance', 'localization')),
DATA_VALUE VARCHAR2(25) NOT NULL,
DATA_UNIT VARCHAR2(25) NOT NULL,
ASSAY_ID INTEGER,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PROTEINEXPTANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT PROTEINEXPTANNOTATION_UK UNIQUE (DBENTITY_ID, REFERENCE_ID, EXPERIMENT_TYPE) ) TABLESPACE DATA03;
CREATE INDEX PROTEXPTANNO_REF_FK_INDEX ON PROTEINEXPTANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX PROTEXPTANNO_TAX_FK_INDEX ON PROTEINEXPTANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX PROTEXPTANNO_ASSAY_FK_INDEX ON PROTEINEXPTANNOTATION (ASSAY_ID) TABLESPACE DATA03;
CREATE INDEX PROTEXPTANNO_SOURCE_FK_INDEX ON PROTEINEXPTANNOTATION (SOURCE_ID) TABLESPACE DATA03;
ALTER TABLE PROTEINEXPTANNOTATION
ADD CONSTRAINT PROTEXPTANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINEXPTANNOTATION
ADD CONSTRAINT PROTEXPTANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINEXPTANNOTATION
ADD CONSTRAINT PROTEXPTANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINEXPTANNOTATION
ADD CONSTRAINT PROTEXPTANNO_ASSAY_FK FOREIGN KEY (ASSAY_ID) REFERENCES OBI (OBI_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINEXPTANNOTATION
ADD CONSTRAINT PROTEXPTANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PROTEINEXPTANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINEXPTANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINEXPTANNOTATION TO AUXILIARY;

DROP TABLE PROTEINEXPTANNOTATION_COND CASCADE CONSTRAINTS;
CREATE TABLE PROTEINEXPTANNOTATION_COND (
CONDITION_ID INTEGER NOT NULL,
ANNOTATION_ID INTEGER NOT NULL,
CONDITION_CLASS VARCHAR2(40) NOT NULL,
CONDITION_NAME VARCHAR2(500) NOT NULL,
CONDITION_VALUE VARCHAR2(25),
CONDITION_UNIT VARCHAR2(25),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PROTEINEXPTANNOTATION_COND_PK PRIMARY KEY (CONDITION_ID),
CONSTRAINT PROTEINEXPTANNOTATION_COND_UK UNIQUE (ANNOTATION_ID, CONDITION_CLASS, CONDITION_NAME, CONDITION_VALUE) ) TABLESPACE DATA03;
ALTER TABLE PROTEINEXPTANNOTATION_COND
ADD CONSTRAINT PROTEXPTANNOCOND_ANNO_FK FOREIGN KEY (ANNOTATION_ID) REFERENCES PROTEINEXPTANNOTATION (ANNOTATION_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PROTEINEXPTANNOTATION_COND TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINEXPTANNOTATION_COND TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINEXPTANNOTATION_COND TO AUXILIARY;

DROP TABLE PROTEINSEQUENCEANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE PROTEINSEQUENCEANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
BUD_ID INTEGER,
CONTIG_ID INTEGER NOT NULL,
SEQ_VERSION DATE,
GENOMERELEASE_ID INTEGER,
FILE_HEADER VARCHAR2(200) NOT NULL,
DOWNLOAD_FILENAME VARCHAR2(100) NOT NULL,
FILE_ID INTEGER,
RESIDUES CLOB NOT NULL,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PROTEINSEQUENCEANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT PROTEINSEQUENCEANNOTATION_UK UNIQUE (DBENTITY_ID, TAXONOMY_ID, CONTIG_ID) ) TABLESPACE DATA03
LOB (RESIDUES) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX PROTSEQANNO_REF_FK_INDEX ON PROTEINSEQUENCEANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX PROTSEQANNO_TAX_FK_INDEX ON PROTEINSEQUENCEANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX PROTSEQANNO_SOURCE_FK_INDEX ON PROTEINSEQUENCEANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX PROTSEQANNO_CONTIG_FK_INDEX ON PROTEINSEQUENCEANNOTATION (CONTIG_ID) TABLESPACE DATA03;
CREATE INDEX PROTSEQANNO_GENREL_FK_INDEX ON PROTEINSEQUENCEANNOTATION (GENOMERELEASE_ID) TABLESPACE DATA03;
CREATE INDEX PROTSEQANNO_FILE_FK_INDEX ON PROTEINSEQUENCEANNOTATION (FILE_ID) TABLESPACE DATA03;
ALTER TABLE PROTEINSEQUENCEANNOTATION
ADD CONSTRAINT PROTSEQANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINSEQUENCEANNOTATION
ADD CONSTRAINT PROTSEQANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINSEQUENCEANNOTATION
ADD CONSTRAINT PROTSEQANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINSEQUENCEANNOTATION
ADD CONSTRAINT PROTSEQANNO_CONTIG_FK FOREIGN KEY (CONTIG_ID) REFERENCES CONTIG (CONTIG_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINSEQUENCEANNOTATION
ADD CONSTRAINT PROTSEQANNO_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINSEQUENCEANNOTATION
ADD CONSTRAINT PROTSEQANNO_GENREL_FK FOREIGN KEY (GENOMERELEASE_ID) REFERENCES GENOMERELEASE (GENOMERELEASE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE PROTEINSEQUENCEANNOTATION
ADD CONSTRAINT PROTSEQANNO_FILE_FK FOREIGN KEY (FILE_ID) REFERENCES FILEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PROTEINSEQUENCEANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINSEQUENCEANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINSEQUENCEANNOTATION TO AUXILIARY;

DROP TABLE PROTEINSEQUENCE_DETAIL CASCADE CONSTRAINTS;
CREATE TABLE PROTEINSEQUENCE_DETAIL (
DETAIL_ID INTEGER NOT NULL,
ANNOTATION_ID INTEGER NOT NULL,
BUD_ID INTEGER,
MOLECULAR_WEIGHT NUMBER(*,2) NOT NULL,
PROTEIN_LENGTH NUMBER NOT NULL,
N_TERM_SEQ VARCHAR2(10) NOT NULL,
C_TERM_SEQ VARCHAR2(10) NOT NULL,
PI NUMBER(*,2),
CAI NUMBER(*,2),
CODON_BIAS NUMBER(*,2),
FOP_SCORE NUMBER(*,2),
GRAVY_SCORE NUMBER(*,2),
AROMATICITY_SCORE NUMBER(*,2),
ALIPHATIC_INDEX NUMBER(*,2),
INSTABILITY_INDEX NUMBER(*,2),
ALA NUMBER NOT NULL,
ARG NUMBER NOT NULL,
ASN NUMBER NOT NULL,
ASP NUMBER NOT NULL,
CYS NUMBER NOT NULL,
GLN NUMBER NOT NULL,
GLU NUMBER NOT NULL,
GLY NUMBER NOT NULL,
HIS NUMBER NOT NULL,
ILE NUMBER NOT NULL,
LEU NUMBER NOT NULL,
LYS NUMBER NOT NULL,
MET NUMBER NOT NULL,
PHE NUMBER NOT NULL,
PRO NUMBER NOT NULL,
SER NUMBER NOT NULL,
THR NUMBER NOT NULL,
TRP NUMBER NOT NULL,
TYR NUMBER NOT NULL,
VAL NUMBER NOT NULL,
HYDROGEN NUMBER,
SULFUR NUMBER,
NITROGEN NUMBER,
OXYGEN NUMBER,
CARBON NUMBER,
NO_CYS_EXT_COEFF NUMBER,
ALL_CYS_EXT_COEFF NUMBER,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT PROTEINSEQUENCE_DETAIL_PK PRIMARY KEY (DETAIL_ID),
CONSTRAINT PROTEINSEQUENCE_DETAIL_UK UNIQUE (ANNOTATION_ID) ) TABLESPACE DATA03;
ALTER TABLE PROTEINSEQUENCE_DETAIL
ADD CONSTRAINT PROTSEQDET_ANNO_FK FOREIGN KEY (ANNOTATION_ID) REFERENCES PROTEINSEQUENCEANNOTATION (ANNOTATION_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON PROTEINSEQUENCE_DETAIL TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINSEQUENCE_DETAIL TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON PROTEINSEQUENCE_DETAIL TO AUXILIARY;

DROP TABLE REGULATIONANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE REGULATIONANNOTATION ( 
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY1_ID INTEGER NOT NULL,
DBENTITY2_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
ECO_ID INTEGER,
TAXONOMY_ID INTEGER,
BUD_ID INTEGER,
CONDITIONS_KEY VARCHAR2(1000),
DIRECTION VARCHAR2(100),
PVALUE VARCHAR2(40),
FDR VARCHAR2(40),
CONSTRUCT VARCHAR2(100),
ASSAY VARCHAR2(300),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REGULATIONANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT REGULATIONANNOTATION_UK UNIQUE (DBENTITY1_ID, DBENTITY2_ID, ECO_ID, REFERENCE_ID, TAXONOMY_ID, CONDITIONS_KEY)) TABLESPACE DATA03;
CREATE INDEX REGANNO_REF_FK_INDEX ON REGULATIONANNOTATION (REFERENCE_ID) TABLESPACE DATA03;
CREATE INDEX REGANNO_TAX_FK_INDEX ON REGULATIONANNOTATION (TAXONOMY_ID) TABLESPACE DATA03;
CREATE INDEX REGANNO_ECO_FK_INDEX ON REGULATIONANNOTATION (ECO_ID) TABLESPACE DATA03;
CREATE INDEX REGANNO_SOURCE_FK_INDEX ON REGULATIONANNOTATION (SOURCE_ID) TABLESPACE DATA03;
CREATE INDEX REGANNO_DBENTITY2_FK_INDEX ON REGULATIONANNOTATION (DBENTITY2_ID) TABLESPACE DATA03;
ALTER TABLE REGULATIONANNOTATION
ADD CONSTRAINT REGANNO_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES REFERENCEDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REGULATIONANNOTATION
ADD CONSTRAINT REGANNO_TAX_FK FOREIGN KEY (TAXONOMY_ID) REFERENCES TAXONOMY (TAXONOMY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REGULATIONANNOTATION
ADD CONSTRAINT REGANNO_ECO_FK FOREIGN KEY (ECO_ID) REFERENCES ECO (ECO_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REGULATIONANNOTATION
ADD CONSTRAINT REGANNO_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REGULATIONANNOTATION 
ADD CONSTRAINT REGANNO_DBENTITY2_FK FOREIGN KEY (DBENTITY2_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE REGULATIONANNOTATION 
ADD CONSTRAINT REGANNO_DBENTITY1_FK FOREIGN KEY (DBENTITY1_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON REGULATIONANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REGULATIONANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REGULATIONANNOTATION TO AUXILIARY;

/* Curator tables */

DROP TABLE CURATION CASCADE CONSTRAINTS;
CREATE TABLE CURATION (
CURATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
LOCUS_ID INTEGER,
BUD_ID INTEGER,
SUBCLASS VARCHAR2(40) NOT NULL CHECK (SUBCLASS IN ('LOCUS', 'REFERENCE')),
CURATION_TASK VARCHAR2(40) NOT NULL CHECK (CURATION_TASK IN ('Classical phenotype information','Delay','Fast Track','GO information',
'GO needs review','Gene model','Headline needs review','Headline reviewed','Headline information','High Priority','Homology/Disease',
'HTP phenotype','Non-phenotype HTP','Not yet curated','Paragraph needs review','Paragraph not needed','Pathways','Phenotype needs review',
'Phenotype uncuratable','Post-translational modifications','Regulation information')),
CURATOR_COMMENT VARCHAR2(2000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT CURATION_PK PRIMARY KEY (CURATION_ID),
CONSTRAINT CURATION_UK UNIQUE (DBENTITY_ID, SUBCLASS, CURATION_TASK, LOCUS_ID) ) TABLESPACE DATA01;
CREATE INDEX CUR_SOURCE_FK_INDEX ON CURATION (SOURCE_ID) TABLESPACE DATA01;
CREATE INDEX CUR_LOCUS_FK_INDEX ON CURATION (LOCUS_ID) TABLESPACE DATA01;
ALTER TABLE CURATION
ADD CONSTRAINT CUR_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CURATION
ADD CONSTRAINT CUR_DBENT_FK FOREIGN KEY (DBENTITY_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE CURATION
ADD CONSTRAINT CUR_LOCUS_FK FOREIGN KEY (LOCUS_ID) REFERENCES LOCUSDBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON CURATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON CURATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON CURATION TO AUXILIARY;

DROP TABLE AUTHORRESPONSE CASCADE CONSTRAINTS;
CREATE TABLE AUTHORRESPONSE (
CURATION_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
COLLEAGUE_ID INTEGER,
AUTHOR_EMAIL VARCHAR2(100) NOT NULL,
HAS_NOVEL_RESEARCH NUMBER(1),
HAS_LARGE_SCALE_DATA NUMBER(1),
HAS_FAST_TRACK_TAG NUMBER(1),
CURATOR_CHECKED_DATASETS NUMBER(1),
CURATOR_CHECKED_GENELIST NUMBER(1),
NO_ACTION_REQUIRED  NUMBER(1),
RESEARCH_RESULTS CLOB,
GENE_LIST VARCHAR2(4000),
DATASET_DESCRIPTION VARCHAR2(4000),
OTHER_DESCRIPTION VARCHAR2(4000),
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT AUTHORRESPONSE_PK PRIMARY KEY (CURATION_ID),
CONSTRAINT AUTHORRESPONSE_UK UNIQUE (REFERENCE_ID)) TABLESPACE DATA01,
LOB (RESEARCH_RESULTS) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX AUTHRESP_SOURCE_FK_INDEX ON AUTHORRESPONSE (SOURCE_ID) TABLESPACE DATA01;
CREATE INDEX AUTHRESP_COLL_FK_INDEX ON AUTHORRESPONSE (COLLEAGUE_ID) TABLESPACE DATA01;
ALTER TABLE AUTHORRESPONSE
ADD CONSTRAINT AUTHRESP_SOURCE_FK FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (SOURCE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE AUTHORRESPONSE
ADD CONSTRAINT AUTHRESP_COLL_FK FOREIGN KEY (COLLEAGUE_ID) REFERENCES COLLEAGUE (COLLEAGUE_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
ALTER TABLE AUTHORRESPONSE
ADD CONSTRAINT AUTHRESP_REF_FK FOREIGN KEY (REFERENCE_ID) REFERENCES DBENTITY (DBENTITY_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON AUTHORRESPONSE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON AUTHORRESPONSE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON AUTHORRESPONSE TO AUXILIARY;

DROP TABLE REFERENCETRIAGE CASCADE CONSTRAINTS;
CREATE TABLE REFERENCETRIAGE (
CURATION_ID INTEGER NOT NULL,
PMID INTEGER NOT NULL,
CITATION VARCHAR2(500) NOT NULL,
FULLTEXT_URL VARCHAR2(500),
ABSTRACT CLOB,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT REFERENCETRIAGE_PK PRIMARY KEY (CURATION_ID),
CONSTRAINT REFERENCETRIAGE_UK UNIQUE (PMID)) TABLESPACE DATA01,
LOB (ABSTRACT) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
GRANT SELECT ON REFERENCETRIAGE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCETRIAGE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON REFERENCETRIAGE TO AUXILIARY;

DROP TABLE COLLEAGUETRIAGE CASCADE CONSTRAINTS;
CREATE TABLE COLLEAGUETRIAGE (
CURATION_ID INTEGER NOT NULL,
TRIAGE_TYPE VARCHAR2(10) NOT NULL CHECK (TRIAGE_TYPE IN ('New', 'Update')),
COLLEAGUE_ID INTEGER,
COLLEAGUE_DATA CLOB,
DATE_CREATED DATE DEFAULT SYSDATE NOT NULL,
CREATED_BY VARCHAR2(12) DEFAULT SUBSTR(USER,1,12) NOT NULL,
CONSTRAINT COLLEAGUETRIAGE_PK PRIMARY KEY (CURATION_ID) TABLESPACE DATA01,
LOB (COLLEAGUE_DATA) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
GRANT SELECT ON COLLEAGUETRIAGE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUETRIAGE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON COLLEAGUETRIAGE TO AUXILIARY;

/* Archive */

DROP TABLE ARCH_LOCUSCHANGE CASCADE CONSTRAINTS;
CREATE TABLE ARCH_LOCUSCHANGE (
ARCHIVE_ID INTEGER NOT NULL,
LOCUS_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
CHANGE_TYPE VARCHAR2(100) NOT NULL CHECK (CHANGE_TYPE IN ('Status', 'Qualifier', 'Gene name')),
OLD_VALUE VARCHAR2(40),
NEW_VALUE VARCHAR2(40),
DATE_CHANGED DATE NOT NULL,
CHANGED_BY VARCHAR2(12) NOT NULL,
DATE_ARCHIVED DATE DEFAULT SYSDATE NOT NULL,
CONSTRAINT ARCH_LOCUSCHANGE_PK PRIMARY KEY (ARCHIVE_ID),
CONSTRAINT ARCH_LOCUSCHANGE_UK UNIQUE (LOCUS_ID, CHANGE_TYPE, OLD_VALUE, NEW_VALUE, DATE_CHANGED) ) TABLESPACE DATA04;
GRANT SELECT ON ARCH_LOCUSCHANGE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_LOCUSCHANGE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_LOCUSCHANGE TO AUXILIARY;

DROP TABLE ARCH_LITERATUREANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE ARCH_LITERATUREANNOTATION (
ARCHIVE_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
LOCUS_ID INTEGER,
BUD_ID INTEGER,
TOPIC VARCHAR2(42) NOT NULL,
DATE_CREATED DATE NOT NULL,
CREATED_BY VARCHAR2(12) NOT NULL,
DATE_ARCHIVED DATE DEFAULT SYSDATE NOT NULL,
CONSTRAINT ARCH_LITERATUREANNOTATION_PK PRIMARY KEY (ARCHIVE_ID),
CONSTRAINT ARCH_LITERATUREANNOTATION_UK UNIQUE (REFERENCE_ID, TOPIC, LOCUS_ID) ) TABLESPACE DATA04;
GRANT SELECT ON ARCH_LITERATUREANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_LITERATUREANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_LITERATUREANNOTATION TO AUXILIARY;

DROP TABLE ARCH_CONTIG CASCADE CONSTRAINTS;
CREATE TABLE ARCH_CONTIG (
CONTIG_ID INTEGER NOT NULL,
FORMAT_NAME VARCHAR2(100) NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
OBJ_URL VARCHAR2(500),
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
BUD_ID INTEGER,
SO_ID INTEGER NOT NULL,
CENTROMERE_START INTEGER,
CENTROMERE_END INTEGER,
GENBANK_ACCESSION VARCHAR2(40),
GI_NUMBER VARCHAR2(40),
REFSEQ_ID VARCHAR2(40),
REFERENCE_CHROMOSOME_ID INTEGER,
REFERENCE_START INTEGER,
REFERENCE_END INTEGER,
REFERENCE_PERCENT_IDENTITY NUMBER(7, 3),
REFERENCE_ALIGNMENT_LENGTH INTEGER,
SEQ_VERSION DATE,
COORD_VERSION DATE,
GENOMERELEASE_ID INTEGER,
FILE_HEADER VARCHAR2(200),
DOWNLOAD_FILENAME VARCHAR2(200),
FILE_ID INTEGER,
DESCRIPTION VARCHAR2(500),
RESIDUES CLOB NOT NULL,
DATE_CREATED DATE NOT NULL,
CREATED_BY VARCHAR2(12) NOT NULL,
DATE_ARCHIVED DATE DEFAULT SYSDATE NOT NULL,
CONSTRAINT ARCH_CONTIG_PK PRIMARY KEY (CONTIG_ID),
CONSTRAINT ARCH_CONTIG_UK UNIQUE (FORMAT_NAME)) TABLESPACE DATA04
LOB (RESIDUES) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX ARCHCONTIG_TAX_INDEX ON ARCH_CONTIG (TAXONOMY_ID) TABLESPACE DATA04;
CREATE INDEX ARCHCONTIG_GENREL_INDEX ON ARCH_CONTIG (GENOMERELEASE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHCONTIG_FILE_INDEX ON ARCH_CONTIG (FILE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHCONTIG_SOURCE_INDEX ON ARCH_CONTIG (SOURCE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHCONTIG_SO_INDEX ON ARCH_CONTIG (SO_ID) TABLESPACE DATA04;
GRANT SELECT ON ARCH_CONTIG TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_CONTIG TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_CONTIG TO AUXILIARY;

DROP TABLE ARCH_CONTIGCHANGE CASCADE CONSTRAINTS;
CREATE TABLE ARCH_CONTIGCHANGE (
ARCHIVE_ID INTEGER NOT NULL,
CONTIG_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
BUD_ID INTEGER,
GENOMERELEASE_ID INTEGER NOT NULL,
CHANGE_TYPE VARCHAR2(40) NOT NULL CHECK (CHANGE_TYPE IN ('Deletion', 'Insertion', 'Substitution')),
CHANGE_MIN_COORD NUMBER(10) NOT NULL,
CHANGE_MAX_COORD NUMBER(10) NOT NULL,
OLD_VALUE VARCHAR2(1000),
NEW_VALUE VARCHAR2(1000),
DATE_CHANGED DATE NOT NULL,
CHANGED_BY VARCHAR2(12) NOT NULL,
DATE_ARCHIVED DATE DEFAULT SYSDATE NOT NULL,
CONSTRAINT ARCH_CONTIGCHANGE_PK PRIMARY KEY (ARCHIVE_ID),
CONSTRAINT ARCH_CONTIGCHANGE_UK UNIQUE (CONTIG_ID, GENOMERELEASE_ID, CHANGE_TYPE, CHANGE_MIN_COORD, CHANGE_MAX_COORD)) TABLESPACE DATA04;
CREATE INDEX ARCHCONTIGCHG_GENREL_FK_INDEX ON ARCH_CONTIGCHANGE (GENOMERELEASE_ID) TABLESPACE DATA04;
ALTER TABLE ARCH_CONTIGCHANGE
ADD CONSTRAINT ARCHCONTIGCHG_CONTIG_FK FOREIGN KEY (CONTIG_ID) REFERENCES ARCH_CONTIG (CONTIG_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON ARCH_CONTIGCHANGE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_CONTIGCHANGE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_CONTIGCHANGE TO AUXILIARY;

DROP TABLE ARCH_DNASEQANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE ARCH_DNASEQANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
BUD_ID INTEGER,
SO_ID INTEGER NOT NULL,
DNA_TYPE VARCHAR2(50) NOT NULL CHECK (DNA_TYPE IN ('CODING', '1KB', 'GENOMIC')),
CONTIG_ID INTEGER,
SEQ_VERSION DATE,
COORD_VERSION DATE,
GENOMERELEASE_ID INTEGER,
START_INDEX INTEGER,
END_INDEX INTEGER,
STRAND VARCHAR2(1) NOT NULL CHECK (STRAND IN ('+', '-', '0')),
FILE_HEADER VARCHAR2(200),
DOWNLOAD_FILENAME VARCHAR2(200),
FILE_ID INTEGER,
RESIDUES CLOB NOT NULL,
DATE_CREATED DATE NOT NULL,
CREATED_BY VARCHAR2(12) NOT NULL,
DATE_ARCHIVED DATE DEFAULT SYSDATE NOT NULL,
CONSTRAINT ARCH_DNASEQANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT ARCH_DNASEQANNOTATION_UK UNIQUE (DBENTITY_ID, TAXONOMY_ID, CONTIG_ID, GENOMERELEASE_ID, SO_ID, DNA_TYPE) ) TABLESPACE DATA04
LOB (RESIDUES) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX ARCHDNASEQANNO_REF_INDEX ON ARCH_DNASEQANNOTATION (REFERENCE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHDNASEQANNO_SO_INDEX ON ARCH_DNASEQANNOTATION (SO_ID) TABLESPACE DATA04;
CREATE INDEX ARCHDNASEQANNO_GENREL_INDEX ON ARCH_DNASEQANNOTATION (GENOMERELEASE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHDNASEQANNO_FILE_INDEX ON ARCH_DNASEQANNOTATION (FILE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHDNASEQANNO_SOURCE_INDEX ON ARCH_DNASEQANNOTATION (SOURCE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHDNASEQANNO_TAX_INDEX ON ARCH_DNASEQANNOTATION (TAXONOMY_ID) TABLESPACE DATA04;
CREATE INDEX ARCHDNASEQANNO_CONTIG_FK_INDEX ON ARCH_DNASEQANNOTATION (CONTIG_ID) TABLESPACE DATA04;
ALTER TABLE ARCH_DNASEQANNOTATION
ADD CONSTRAINT ARCHDNASEQANNO_CONTIG_FK FOREIGN KEY (CONTIG_ID) REFERENCES ARCH_CONTIG (CONTIG_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON ARCH_DNASEQANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_DNASEQANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_DNASEQANNOTATION TO AUXILIARY;

DROP TABLE ARCH_DNASUBSEQUENCE CASCADE CONSTRAINTS;
CREATE TABLE ARCH_DNASUBSEQUENCE (
DNASUBSEQUENCE_ID INTEGER NOT NULL,
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
DISPLAY_NAME VARCHAR2(500) NOT NULL,
BUD_ID INTEGER,
SO_ID INTEGER NOT NULL,
RELATIVE_START_INDEX INTEGER NOT NULL,
RELATIVE_END_INDEX INTEGER NOT NULL,
CONTIG_START_INDEX INTEGER NOT NULL,
CONTIG_END_INDEX INTEGER NOT NULL,
SEQ_VERSION DATE,
COORD_VERSION DATE,
GENOMERELEASE_ID INTEGER,
FILE_HEADER VARCHAR2(200) NOT NULL,
DOWNLOAD_FILENAME VARCHAR2(100) NOT NULL,
FILE_ID INTEGER,
RESIDUES CLOB NOT NULL,
DATE_CREATED DATE NOT NULL,
CREATED_BY VARCHAR2(12) NOT NULL,
DATE_ARCHIVED DATE DEFAULT SYSDATE NOT NULL,
CONSTRAINT ARCH_DNASUBSEQUENCE_PK PRIMARY KEY (DNASUBSEQUENCE_ID),
CONSTRAINT ARCH_DNASUBSEQUENCE_UK UNIQUE (ANNOTATION_ID, DBENTITY_ID, GENOMERELEASE_ID, RELATIVE_START_INDEX, RELATIVE_END_INDEX)) TABLESPACE DATA04
LOB (RESIDUES) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX ARCHDNASUBSEQ_SO_FK_INDEX ON ARCH_DNASUBSEQUENCE (SO_ID) TABLESPACE DATA04;
CREATE INDEX ARCHDNASUBSEQ_GENREL_FK_INDEX ON ARCH_DNASUBSEQUENCE (GENOMERELEASE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHDNASUBSEQ_FILE_FK_INDEX ON ARCH_DNASUBSEQUENCE (FILE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHDNASUBSEQ_DBENT_FK_INDEX ON ARCH_DNASUBSEQUENCE (DBENTITY_ID) TABLESPACE DATA04;
ALTER TABLE ARCH_DNASUBSEQUENCE
ADD CONSTRAINT ARCHDNASUBSEQ_ANNO_FK FOREIGN KEY (ANNOTATION_ID) REFERENCES ARCH_DNASEQANNOTATION (ANNOTATION_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON ARCH_DNASUBSEQUENCE TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_DNASUBSEQUENCE TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_DNASUBSEQUENCE TO AUXILIARY;

DROP TABLE ARCH_PROTEINSEQANNOTATION CASCADE CONSTRAINTS;
CREATE TABLE ARCH_PROTEINSEQANNOTATION (
ANNOTATION_ID INTEGER NOT NULL,
DBENTITY_ID INTEGER NOT NULL,
SOURCE_ID INTEGER NOT NULL,
TAXONOMY_ID INTEGER NOT NULL,
REFERENCE_ID INTEGER,
BUD_ID INTEGER,
CONTIG_ID INTEGER NOT NULL,
SEQ_VERSION DATE,
GENOMERELEASE_ID INTEGER,
FILE_HEADER VARCHAR2(200),
DOWNLOAD_FILENAME VARCHAR2(200),
FILE_ID INTEGER,
RESIDUES CLOB NOT NULL,
DATE_CREATED DATE NOT NULL,
CREATED_BY VARCHAR2(12) NOT NULL,
DATE_ARCHIVED DATE DEFAULT SYSDATE NOT NULL,
CONSTRAINT ARCH_PROTEINSEQANNOTATION_PK PRIMARY KEY (ANNOTATION_ID),
CONSTRAINT ARCH_PROTEINSEQANNOTATION_UK UNIQUE (DBENTITY_ID, TAXONOMY_ID, CONTIG_ID, GENOMERELEASE_ID) ) TABLESPACE DATA04
LOB (RESIDUES) store as SECUREFILE (TABLESPACE LOB01
enable storage in row CHUNK 8K nocache nologging retention none);
CREATE INDEX ARCHPROTSEQANNO_GENREL_IDX ON ARCH_PROTEINSEQANNOTATION (GENOMERELEASE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHPROTSEQANNO_FILE_INDEX ON ARCH_PROTEINSEQANNOTATION (FILE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHPROTSEQANNO_SOURCE_INDEX ON ARCH_PROTEINSEQANNOTATION (SOURCE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHPROTSEQANNO_TAX_INDEX ON ARCH_PROTEINSEQANNOTATION (TAXONOMY_ID) TABLESPACE DATA04;
CREATE INDEX ARCHPROTSEQANNO_REF_INDEX ON ARCH_PROTEINSEQANNOTATION (REFERENCE_ID) TABLESPACE DATA04;
CREATE INDEX ARCHPROTSEQANNO_CONTIG_FK_INDEX ON ARCH_PROTEINSEQANNOTATION (CONTIG_ID) TABLESPACE DATA04;
ALTER TABLE ARCH_PROTEINSEQANNOTATION
ADD CONSTRAINT ARCHPROTSEQANNO_CONTIG_FK FOREIGN KEY (CONTIG_ID) REFERENCES ARCH_CONTIG (CONTIG_ID)
ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE VALIDATE;
GRANT SELECT ON ARCH_PROTEINSEQANNOTATION TO DBSELECT;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_PROTEINSEQANNOTATION TO CURATOR;
GRANT DELETE, INSERT, SELECT, UPDATE ON ARCH_PROTEINSEQANNOTATION TO AUXILIARY;
